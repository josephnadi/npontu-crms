import{L as A,o as x,M,b as a,u as e,T as S,a as r,k as c,m as o,h as d,N as y,i as u,_ as j,n as C,w,$ as m,g as p,a0 as T,a1 as k,f as v,S as $,F as D}from"./app-CqcLQhWc.js";import{_ as U}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-SEMuvBU0.js";import"./LoaderWrapper-CNYIpUw8.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-BnGuLdGC.js";import"./useApi-o-nPpLEi-7nyp_4n4.js";const q={class:"mb-6 d-flex align-center"},P={__name:"Create",props:{deals:{type:Array,required:!0},leads:{type:Array,default:()=>[]},contacts:{type:Array,default:()=>[]},clients:{type:Array,default:()=>[]},projects:{type:Array,default:()=>[]},initial_activityable_type:String,initial_activityable_id:[String,Number]},setup(f){const n=f,t=A({type:"call",subject:"",description:"",activity_date:new Date().toISOString().slice(0,16),due_date:"",status:"pending",activityable_type:n.initial_activityable_type?n.initial_activityable_type.includes("\\")?n.initial_activityable_type:`App\\Models\\${n.initial_activityable_type}`:"App\\Models\\Deal",activityable_id:n.initial_activityable_id?parseInt(n.initial_activityable_id):null,duration_minutes:null}),_=[{title:"Deal",value:"App\\Models\\Deal"},{title:"Lead",value:"App\\Models\\Lead"},{title:"Contact",value:"App\\Models\\Contact"},{title:"Client",value:"App\\Models\\Client"},{title:"Project",value:"App\\Models\\Project"}],b=[{title:"Call",value:"call"},{title:"Meeting",value:"meeting"},{title:"Email",value:"email"},{title:"Task",value:"task"},{title:"Note",value:"note"}],V=D(()=>{switch(t.activityable_type){case"App\\Models\\Deal":return n.deals.map(i=>({title:i.title,value:i.id}));case"App\\Models\\Lead":return n.leads.map(i=>({title:`${i.first_name} ${i.last_name}`,value:i.id}));case"App\\Models\\Contact":return n.contacts.map(i=>({title:`${i.first_name} ${i.last_name}`,value:i.id}));case"App\\Models\\Client":return n.clients.map(i=>({title:i.name,value:i.id}));case"App\\Models\\Project":return n.projects.map(i=>({title:i.name,value:i.id}));default:return[]}}),g=()=>{t.post(window.route("crm.activities.store"),{onSuccess:()=>{}})};return(i,l)=>(x(),M($,null,[a(e(S),{title:"Schedule Activity"}),a(U,null,{default:r(()=>[a(c,{justify:"center"},{default:r(()=>[a(o,{cols:"12",md:"8",lg:"6"},{default:r(()=>[d("div",q,[a(e(y),{href:i.route("crm.activities.index"),class:"mr-4"},{default:r(()=>[a(u,{icon:"",variant:"text"},{default:r(()=>[a(j,{name:"custom-chevron-left",style:{width:"20px",height:"20px"}})]),_:1})]),_:1},8,["href"]),l[9]||(l[9]=d("h2",{class:"text-h4 font-weight-bold"},"Schedule Activity",-1))]),a(C,{class:"pa-6"},{default:r(()=>[d("form",{onSubmit:w(g,["prevent"])},[a(c,null,{default:r(()=>[a(o,{cols:"12",md:"6"},{default:r(()=>[a(m,{modelValue:e(t).type,"onUpdate:modelValue":l[0]||(l[0]=s=>e(t).type=s),items:b,label:"Activity Type",required:"","error-messages":e(t).errors.type,variant:"outlined","prepend-inner-icon":"mdi-format-list-bulleted-type"},null,8,["modelValue","error-messages"])]),_:1}),a(o,{cols:"12",md:"6"},{default:r(()=>[a(p,{modelValue:e(t).activity_date,"onUpdate:modelValue":l[1]||(l[1]=s=>e(t).activity_date=s),label:"Date & Time",type:"datetime-local",required:"","error-messages":e(t).errors.activity_date,variant:"outlined","prepend-inner-icon":"mdi-calendar-clock"},null,8,["modelValue","error-messages"])]),_:1}),a(o,{cols:"12",md:"6"},{default:r(()=>[a(m,{modelValue:e(t).activityable_type,"onUpdate:modelValue":[l[2]||(l[2]=s=>e(t).activityable_type=s),l[3]||(l[3]=s=>e(t).activityable_id=null)],items:_,label:"Relate To",required:"","error-messages":e(t).errors.activityable_type,variant:"outlined","prepend-inner-icon":"mdi-link-variant"},null,8,["modelValue","error-messages"])]),_:1}),a(o,{cols:"12",md:"6"},{default:r(()=>[a(T,{modelValue:e(t).activityable_id,"onUpdate:modelValue":l[4]||(l[4]=s=>e(t).activityable_id=s),items:V.value,label:"Select Entity",required:"","error-messages":e(t).errors.activityable_id,variant:"outlined","prepend-inner-icon":"mdi-magnify",disabled:!e(t).activityable_type},null,8,["modelValue","items","error-messages","disabled"])]),_:1}),a(o,{cols:"12"},{default:r(()=>[a(p,{modelValue:e(t).subject,"onUpdate:modelValue":l[5]||(l[5]=s=>e(t).subject=s),label:"Subject",required:"","error-messages":e(t).errors.subject,variant:"outlined","prepend-inner-icon":"mdi-text-short"},null,8,["modelValue","error-messages"])]),_:1}),a(o,{cols:"12"},{default:r(()=>[a(k,{modelValue:e(t).description,"onUpdate:modelValue":l[6]||(l[6]=s=>e(t).description=s),label:"Description / Notes",rows:"4","error-messages":e(t).errors.description,variant:"outlined","prepend-inner-icon":"mdi-note-text-outline"},null,8,["modelValue","error-messages"])]),_:1}),a(o,{cols:"12",md:"6"},{default:r(()=>[a(p,{label:"Duration (minutes)",type:"number",modelValue:e(t).duration_minutes,"onUpdate:modelValue":l[7]||(l[7]=s=>e(t).duration_minutes=s),"error-messages":e(t).errors.duration_minutes,variant:"outlined","prepend-inner-icon":"mdi-timer-outline"},null,8,["modelValue","error-messages"])]),_:1}),a(o,{cols:"12",md:"6"},{default:r(()=>[a(m,{modelValue:e(t).status,"onUpdate:modelValue":l[8]||(l[8]=s=>e(t).status=s),items:["pending","completed","cancelled"],label:"Status",required:"","error-messages":e(t).errors.status,variant:"outlined","prepend-inner-icon":"mdi-check-circle-outline"},null,8,["modelValue","error-messages"])]),_:1}),a(o,{cols:"12",class:"d-flex justify-end gap-2"},{default:r(()=>[a(e(y),{href:i.route("crm.activities.index"),class:"text-decoration-none mr-2"},{default:r(()=>[a(u,{variant:"outlined"},{default:r(()=>[...l[10]||(l[10]=[v("Cancel",-1)])]),_:1})]),_:1},8,["href"]),a(u,{type:"submit",color:"primary",loading:e(t).processing},{default:r(()=>[...l[11]||(l[11]=[v(" Save Activity ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})],32)]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{P as default};
