import{o,M as u,b as s,u as m,T as I,a,k as E,m as g,h as l,N as p,i as f,f as i,U as w,O as b,S as _,W as v,X as k,R as d,v as O,c as V,n as D,_ as R,Y as x,q as U,s as C,Z as S,F as q}from"./app-CqcLQhWc.js";import{_ as F}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-SEMuvBU0.js";import{_ as M}from"./LoaderWrapper-CNYIpUw8.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-BnGuLdGC.js";import"./useApi-o-nPpLEi-7nyp_4n4.js";const $={class:"d-flex gap-2"},P={key:0,class:"text-center py-12"},Q={class:"d-flex align-center mb-4"},W={class:"d-flex"},X={class:"text-caption text-white mt-1 font-weight-bold"},Y={class:"pa-4 flex-grow-1"},Z={class:"d-flex justify-space-between align-start mb-1"},G={class:"text-subtitle-1 font-weight-bold"},H={class:"d-flex align-center mt-1"},J={class:"text-body-2 text-medium-emphasis mt-2"},K={class:"pa-2 d-flex flex-column justify-center"},ee={__name:"Calendar",props:{activities:{type:Array,required:!0}},setup(z){const L=z,y=q(()=>{const t={};return L.activities.forEach(e=>{const r=new Date(e.activity_date).toDateString();t[r]||(t[r]=[]),t[r].push(e)}),Object.keys(t).sort((e,r)=>new Date(e)-new Date(r)).reduce((e,r)=>(e[r]=t[r].sort((c,n)=>new Date(c.activity_date)-new Date(n.activity_date)),e),{})}),j=t=>{switch(t){case"call":return"custom-phone";case"meeting":return"custom-users";case"email":return"custom-mail";case"task":return"custom-check";case"note":return"custom-file-text";default:return"custom-calendar"}},A=t=>{switch(t){case"call":return"info";case"meeting":return"primary";case"email":return"warning";case"task":return"success";case"note":return"secondary";default:return"grey"}},N=t=>new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),T=t=>{if(!t.activityable)return"#";switch(t.activityable_type.split("\\").pop().toLowerCase()){case"deal":return window.route("crm.deals.show",t.activityable_id);case"lead":return window.route("crm.leads.show",t.activityable_id);case"contact":return window.route("crm.contacts.show",t.activityable_id);case"client":return window.route("crm.clients.show",t.activityable_id);default:return"#"}},B=t=>t.activityable?t.activityable.title||t.activityable.name||"View":"Unknown",h=t=>new Date(t).toDateString()===new Date().toDateString();return(t,e)=>(o(),u(_,null,[s(m(I),{title:"Activity Calendar"}),s(F,null,{default:a(()=>[s(E,null,{default:a(()=>[s(g,{cols:"12",class:"d-flex justify-space-between align-center"},{default:a(()=>[e[2]||(e[2]=l("div",null,[l("h2",{class:"text-h4 font-weight-bold"},"Activity Schedule"),l("p",{class:"text-subtitle-1 text-grey"},"View your upcoming calls and meetings")],-1)),l("div",$,[s(m(p),{href:t.route("crm.activities.index"),class:"text-decoration-none mr-2"},{default:a(()=>[s(f,{variant:"outlined","prepend-icon":"mdi-format-list-bulleted"},{default:a(()=>[...e[0]||(e[0]=[i("List View",-1)])]),_:1})]),_:1},8,["href"]),s(m(p),{href:t.route("crm.activities.create"),class:"text-decoration-none"},{default:a(()=>[s(f,{color:"primary","prepend-icon":"mdi-plus"},{default:a(()=>[...e[1]||(e[1]=[i("Add Activity",-1)])]),_:1})]),_:1},8,["href"])])]),_:1}),s(g,{cols:"12",md:"8",lg:"6"},{default:a(()=>[Object.keys(y.value).length===0?(o(),u("div",P,[s(w,{icon:"mdi-calendar-blank",size:"64",color:"grey-lighten-1",class:"mb-4"}),e[4]||(e[4]=l("h3",{class:"text-h5 text-grey"},"No scheduled activities found",-1)),e[5]||(e[5]=l("p",{class:"text-grey mb-6"},"Start by adding a new call or meeting.",-1)),s(m(p),{href:t.route("crm.activities.create")},{default:a(()=>[s(f,{color:"primary"},{default:a(()=>[...e[3]||(e[3]=[i("Schedule Activity",-1)])]),_:1})]),_:1},8,["href"])])):b("",!0),(o(!0),u(_,null,v(y.value,(r,c)=>(o(),u("div",{key:c,class:"mb-8"},[l("div",Q,[l("h3",{class:k(["text-h6 font-weight-bold",h(c)?"text-primary":""])},d(h(c)?"Today - ":"")+d(c),3),s(O,{class:"ml-4"})]),(o(!0),u(_,null,v(r,n=>(o(),V(D,{key:n.id,class:"mb-3 overflow-hidden",variant:"outlined"},{default:a(()=>[l("div",W,[l("div",{class:k(["pa-4 d-flex flex-column align-center justify-center bg-"+A(n.type)]),style:{width:"80px"}},[s(R,{name:j(n.type),style:{width:"24px",height:"24px",color:"white"}},null,8,["name"]),l("span",X,d(N(n.activity_date)),1)],2),l("div",Y,[l("div",Z,[l("div",null,[l("h4",G,d(n.subject),1),l("div",H,[e[6]||(e[6]=l("span",{class:"text-caption text-grey mr-2"},"Related to:",-1)),s(m(p),{href:T(n),class:"text-caption text-primary text-decoration-none font-weight-bold"},{default:a(()=>[i(d(B(n)),1)]),_:2},1032,["href"])])]),s(x,{color:n.status==="completed"?"success":"warning",size:"x-small",variant:"flat",class:"text-capitalize"},{default:a(()=>[i(d(n.status),1)]),_:2},1032,["color"])]),l("p",J,d(n.description),1)]),l("div",K,[n.status!=="completed"?(o(),V(f,{key:0,icon:"mdi-check",variant:"text",size:"small",color:"success"})):b("",!0),s(f,{icon:"mdi-pencil-outline",variant:"text",size:"small",color:"grey"})])])]),_:2},1024))),128))]))),128))]),_:1}),s(g,{cols:"12",md:"4"},{default:a(()=>[s(D,{class:"pa-4"},{default:a(()=>[e[11]||(e[11]=l("h3",{class:"text-h6 font-weight-bold mb-4"},"Quick Stats",-1)),s(U,{density:"compact"},{default:a(()=>[s(C,null,{prepend:a(()=>[s(w,{color:"info",icon:"mdi-phone"})]),append:a(()=>[s(x,{size:"small",color:"info"},{default:a(()=>[...e[8]||(e[8]=[i("2",-1)])]),_:1})]),default:a(()=>[s(S,null,{default:a(()=>[...e[7]||(e[7]=[i("Pending Calls",-1)])]),_:1})]),_:1}),s(C,null,{prepend:a(()=>[s(w,{color:"primary",icon:"mdi-account-group"})]),append:a(()=>[s(x,{size:"small",color:"primary"},{default:a(()=>[...e[10]||(e[10]=[i("1",-1)])]),_:1})]),default:a(()=>[s(S,null,{default:a(()=>[...e[9]||(e[9]=[i("Upcoming Meetings",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64))}},re=M(ee,[["__scopeId","data-v-28aa10fe"]]);export{re as default};
