import{o as n,c,a as t,b as s,q as h,N as x,W as j,h as d,P as b,aT as A,T as I,X as N,aU as z,S as y,a6 as q,s as D,t as k,$ as w,f as u,j as S,a8 as U,Z as V,_ as B,p as L,a7 as T,M,n as m,a0 as $,v as o,g as C,a2 as F,l as P,w as E}from"./app-CajJQkEm.js";import{_ as O}from"./LoaderWrapper-CM7phn5N.js";const R={key:0,class:"text-center py-8"},W={class:"d-flex justify-space-between align-start mb-1"},X={class:"text-subtitle-1 font-weight-bold"},Z={class:"text-caption text-grey"},G={class:"text-body-2 mb-2"},H={class:"d-flex align-center gap-2"},J={__name:"ActivityTimeline",props:{activities:{type:Array,required:!0}},setup(p){const g=l=>{confirm("Are you sure you want to delete this activity?")&&T.delete(window.route("crm.activities.destroy",l),{preserveScroll:!0})},f=l=>{T.put(window.route("crm.activities.update",l.id),{...l,status:"completed"},{preserveScroll:!0})},v=l=>{switch(l){case"call":return"custom-phone";case"meeting":return"custom-users";case"email":return"custom-mail";case"task":return"custom-check";case"note":return"custom-file-text";default:return"custom-calendar"}},a=l=>{switch(l){case"call":return"info";case"meeting":return"primary";case"email":return"warning";case"task":return"success";case"note":return"secondary";default:return"grey"}},_=l=>new Date(l).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return(l,i)=>(n(),c(L,{variant:"flat"},{default:t(()=>[s(h,null,{default:t(()=>[p.activities.length===0?(n(),x("div",R,[s(j,{icon:"mdi-calendar-blank",size:"48",color:"grey-lighten-1",class:"mb-2"}),i[0]||(i[0]=d("p",{class:"text-grey"},"No activities recorded yet.",-1))])):b("",!0),s(A,{side:"end",align:"start",density:"compact"},{default:t(()=>[(n(!0),x(I,null,N(p.activities,e=>(n(),c(z,{key:e.id,"dot-color":a(e.type),size:"small"},{icon:t(()=>[s(B,{name:v(e.type),style:{width:"16px",height:"16px",color:"white"}},null,8,["name"])]),default:t(()=>[d("div",W,[d("div",null,[d("h4",X,y(e.subject),1),d("span",Z,y(_(e.activity_date)),1)]),s(q,null,{activator:t(({props:r})=>[s(S,U({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},r),null,16)]),default:t(()=>[s(D,{size:"small"},{default:t(()=>[e.status==="pending"?(n(),c(k,{key:0,onClick:r=>f(e),"prepend-icon":"mdi-check",color:"success"},{default:t(()=>[s(w,null,{default:t(()=>[...i[1]||(i[1]=[u("Mark Completed",-1)])]),_:1})]),_:1},8,["onClick"])):b("",!0),s(k,{onClick:r=>g(e.id),"prepend-icon":"mdi-delete",color:"error"},{default:t(()=>[s(w,null,{default:t(()=>[...i[2]||(i[2]=[u("Delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),d("p",G,y(e.description),1),d("div",H,[s(V,{size:"x-small",color:a(e.type),variant:"tonal",class:"text-capitalize"},{default:t(()=>[u(y(e.type),1)]),_:2},1032,["color"]),e.status==="completed"?(n(),c(V,{key:0,size:"x-small",color:"success",variant:"flat"},{default:t(()=>[...i[3]||(i[3]=[u(" Completed ",-1)])]),_:1})):e.status==="pending"?(n(),c(V,{key:1,size:"x-small",color:"warning",variant:"tonal"},{default:t(()=>[...i[4]||(i[4]=[u(" Pending ",-1)])]),_:1})):b("",!0)])]),_:2},1032,["dot-color"]))),128))]),_:1})]),_:1})]),_:1}))}},Y=O(J,[["__scopeId","data-v-446cf719"]]),ee={__name:"ActivityForm",props:{activityableType:{type:String,required:!0},activityableId:{type:[Number,String],required:!0}},emits:["success"],setup(p,{emit:g}){const f=p,v=g,a=M({type:"note",subject:"",description:"",activity_date:new Date().toISOString().slice(0,16),due_date:"",status:"pending",activityable_type:f.activityableType,activityable_id:f.activityableId}),_=[{title:"Call",value:"call"},{title:"Meeting",value:"meeting"},{title:"Email",value:"email"},{title:"Task",value:"task"},{title:"Note",value:"note"}],l=()=>{a.post(window.route("crm.activities.store"),{onSuccess:()=>{a.reset("subject","description"),v("success")}})};return(i,e)=>(n(),x("form",{onSubmit:E(l,["prevent"])},[s(P,null,{default:t(()=>[s(m,{cols:"12",md:"6"},{default:t(()=>[s($,{modelValue:o(a).type,"onUpdate:modelValue":e[0]||(e[0]=r=>o(a).type=r),items:_,label:"Activity Type",required:"",density:"comfortable",variant:"outlined","prepend-inner-icon":"mdi-format-list-bulleted-type"},null,8,["modelValue"])]),_:1}),s(m,{cols:"12",md:"6"},{default:t(()=>[s(C,{modelValue:o(a).activity_date,"onUpdate:modelValue":e[1]||(e[1]=r=>o(a).activity_date=r),label:"Date & Time",type:"datetime-local",required:"",density:"comfortable",variant:"outlined","prepend-inner-icon":"mdi-calendar-clock"},null,8,["modelValue"])]),_:1}),s(m,{cols:"12"},{default:t(()=>[s(C,{modelValue:o(a).subject,"onUpdate:modelValue":e[2]||(e[2]=r=>o(a).subject=r),label:"Subject",required:"",density:"comfortable","error-messages":o(a).errors.subject,variant:"outlined","prepend-inner-icon":"mdi-text-short"},null,8,["modelValue","error-messages"])]),_:1}),s(m,{cols:"12"},{default:t(()=>[s(F,{modelValue:o(a).description,"onUpdate:modelValue":e[3]||(e[3]=r=>o(a).description=r),label:"Description / Notes",rows:"3",density:"comfortable",variant:"outlined","prepend-inner-icon":"mdi-note-text-outline"},null,8,["modelValue"])]),_:1}),s(m,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[s(S,{type:"submit",color:"primary",loading:o(a).processing},{default:t(()=>[...e[4]||(e[4]=[u(" Save Activity ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})],32))}};export{Y as A,ee as _};
