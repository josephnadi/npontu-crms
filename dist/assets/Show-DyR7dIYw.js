import{_ as F}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-SEMuvBU0.js";import{o as m,M as S,b as t,a,m as w,n as C,ae as h,h as l,a2 as z,R as i,i as o,U as r,f as n,c as y,O as b,v as D,k as E,Y as Q,am as Y,ab as L,p as T,aa as $,Q as G,ac as j,ad as M,S as H,r as u,a8 as A,ax as J,ay as K}from"./app-CqcLQhWc.js";import{_ as W}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-Bl_MKtEy.js";import{_ as g}from"./UiParentCard.vue_vue_type_script_setup_true_lang-Drb8UaWj.js";import{L as X}from"./LeadConversionModal-tKN_JP7h.js";import{A as Z,_,a as ee}from"./EngagementForm-CftqFFTl.js";import{_ as te}from"./LoaderWrapper-CNYIpUw8.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-BnGuLdGC.js";import"./useApi-o-nPpLEi-7nyp_4n4.js";const le={class:"d-flex align-center justify-space-between mb-6"},ae={class:"d-flex align-center"},se={class:"text-h4 text-primary"},ie={class:"text-h4 font-weight-bold mb-1"},ne={class:"text-subtitle-1 text-medium-emphasis"},de={class:"d-flex gap-2"},oe={class:"d-flex align-center mb-4"},re={class:"text-body-1"},ue={class:"d-flex align-center mb-4"},me={class:"text-body-1"},fe={class:"d-flex align-center mb-4"},ve={class:"text-body-1"},ce={class:"d-flex align-start mb-4"},xe={class:"text-body-1"},be={key:0},ge={key:1},pe={class:"text-body-1 white-space-pre-line"},we={class:"mb-6"},Ce={class:"mb-6"},ye={class:"d-flex align-center"},ke={class:"text-h6 font-weight-bold"},Ve={class:"mb-4"},Se={class:"text-body-1 font-weight-medium"},Le={class:"d-flex align-center mt-1"},Te={class:"text-caption text-white"},$e={class:"text-body-2"},Ae={class:"mb-4"},Pe={class:"text-body-2"},Ne={class:"mb-4"},ze={class:"text-body-2"},De={class:"text-body-2"},Ee={class:"text-center mb-6"},je={class:"text-body-1 text-medium-emphasis"},Me={class:"text-center mb-6"},Ue={class:"text-body-1 text-medium-emphasis"},Be={__name:"LeadShow",props:{lead:{type:Object,required:!0},dealStages:{type:Array,default:()=>[]}},setup(s){const x=s,P=u("Lead Details"),U=u([{title:"CRM",disabled:!1,href:"#"},{title:"Leads",disabled:!1,href:"/crm/leads"},{title:"Details",disabled:!0,href:"#"}]),p=u(!1),f=u(!1),v=u(!1),c=u(!1),k=u(!1),V=u(!1),B=N=>({new:"info",contacted:"warning",qualified:"purple",converted:"success",lost:"error"})[N]||"default",I=()=>{A.visit(route("crm.leads.edit",x.lead.id))},R=()=>{p.value=!1},q=()=>{k.value=!0,A.post(route("crm.leads.convert-to-partner",x.lead.id),{},{onFinish:()=>{k.value=!1,v.value=!1}})},O=()=>{V.value=!0,A.post(route("crm.leads.convert-to-ticket",x.lead.id),{},{onFinish:()=>{V.value=!1,c.value=!1}})};return(N,e)=>(m(),S(H,null,[t(W,{title:P.value,breadcrumbs:U.value},null,8,["title","breadcrumbs"]),t(E,null,{default:a(()=>[t(w,{cols:"12",md:"8"},{default:a(()=>[t(C,{elevation:"10",class:"mb-6"},{default:a(()=>[t(h,{class:"pa-6"},{default:a(()=>[l("div",le,[l("div",ae,[t(z,{size:"64",color:"lightprimary",class:"mr-4"},{default:a(()=>[l("span",se,i((s.lead.first_name||"L")[0])+i((s.lead.last_name||"E")[0]),1)]),_:1}),l("div",null,[l("h2",ie,i(s.lead.full_name),1),l("div",ne,i(s.lead.job_title)+" at "+i(s.lead.company_name||"N/A"),1)])]),l("div",de,[t(o,{color:"primary",variant:"outlined",onClick:I,title:"Edit Lead"},{default:a(()=>[t(r,null,{default:a(()=>[...e[15]||(e[15]=[n("mdi-pencil",-1)])]),_:1})]),_:1}),s.lead.status==="qualified"?(m(),y(o,{key:0,color:"success",onClick:e[0]||(e[0]=d=>p.value=!0),title:"Convert to Client"},{default:a(()=>[t(r,null,{default:a(()=>[...e[16]||(e[16]=[n("mdi-account-convert",-1)])]),_:1})]),_:1})):b("",!0),s.lead.status!=="converted"?(m(),y(o,{key:1,color:"warning",variant:"outlined",onClick:e[1]||(e[1]=d=>v.value=!0),title:"Convert to Partner"},{default:a(()=>[t(r,null,{default:a(()=>[...e[17]||(e[17]=[n("mdi-handshake-outline",-1)])]),_:1})]),_:1})):b("",!0),t(o,{color:"info",variant:"outlined",onClick:e[2]||(e[2]=d=>c.value=!0),title:"Convert to Ticket"},{default:a(()=>[t(r,null,{default:a(()=>[...e[18]||(e[18]=[n("mdi-ticket-outline",-1)])]),_:1})]),_:1}),t(o,{color:"info",variant:"tonal",onClick:e[3]||(e[3]=d=>f.value=!0),title:"Log Engagement"},{default:a(()=>[t(r,null,{default:a(()=>[...e[19]||(e[19]=[n("mdi-calendar-plus",-1)])]),_:1})]),_:1})])]),t(D,{class:"mb-6"}),t(E,null,{default:a(()=>[t(w,{cols:"12",md:"6"},{default:a(()=>[e[26]||(e[26]=l("h3",{class:"text-subtitle-1 font-weight-bold mb-4"},"Contact Information",-1)),l("div",oe,[t(r,{color:"primary",class:"mr-3"},{default:a(()=>[...e[20]||(e[20]=[n("mdi-email-outline",-1)])]),_:1}),l("div",null,[e[21]||(e[21]=l("div",{class:"text-caption text-medium-emphasis"},"Email",-1)),l("div",re,i(s.lead.email||"N/A"),1)])]),l("div",ue,[t(r,{color:"primary",class:"mr-3"},{default:a(()=>[...e[22]||(e[22]=[n("mdi-phone-outline",-1)])]),_:1}),l("div",null,[e[23]||(e[23]=l("div",{class:"text-caption text-medium-emphasis"},"Phone",-1)),l("div",me,i(s.lead.phone||"N/A"),1)])]),l("div",fe,[t(r,{color:"primary",class:"mr-3"},{default:a(()=>[...e[24]||(e[24]=[n("mdi-cellphone",-1)])]),_:1}),l("div",null,[e[25]||(e[25]=l("div",{class:"text-caption text-medium-emphasis"},"Mobile",-1)),l("div",ve,i(s.lead.mobile||"N/A"),1)])])]),_:1}),t(w,{cols:"12",md:"6"},{default:a(()=>[e[29]||(e[29]=l("h3",{class:"text-subtitle-1 font-weight-bold mb-4"},"Address",-1)),l("div",ce,[t(r,{color:"primary",class:"mr-3 mt-1"},{default:a(()=>[...e[27]||(e[27]=[n("mdi-map-marker-outline",-1)])]),_:1}),l("div",null,[l("div",xe,[n(i(s.lead.address_line1),1),s.lead.address_line1?(m(),S("br",be)):b("",!0),n(" "+i(s.lead.address_line2),1),s.lead.address_line2?(m(),S("br",ge)):b("",!0),n(" "+i(s.lead.city)+i(s.lead.state?", "+s.lead.state:"")+" "+i(s.lead.postal_code),1),e[28]||(e[28]=l("br",null,null,-1)),n(" "+i(s.lead.country),1)])])])]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{title:"Notes",class:"mb-6"},{default:a(()=>[l("div",pe,i(s.lead.notes||"No notes available for this lead."),1)]),_:1}),t(g,{title:"Recent Activity",class:"mb-6"},{default:a(()=>[t(Z,{activities:s.lead.activities},null,8,["activities"])]),_:1}),t(g,{title:"Engagement Timeline"},{append:a(()=>[t(o,{color:"warning",size:"small",variant:"flat","prepend-icon":"mdi-star-plus-outline",onClick:e[4]||(e[4]=d=>f.value=!0)},{default:a(()=>[...e[30]||(e[30]=[n(" Log Engagement ",-1)])]),_:1})]),default:a(()=>[t(_,{engagements:s.lead.engagements},null,8,["engagements"])]),_:1})]),_:1}),t(w,{cols:"12",md:"4"},{default:a(()=>[t(g,{title:"Status & Score",class:"mb-6"},{default:a(()=>[l("div",we,[e[31]||(e[31]=l("div",{class:"text-caption text-medium-emphasis mb-1"},"Current Status",-1)),t(Q,{color:B(s.lead.status),label:"",class:"text-uppercase"},{default:a(()=>[n(i(s.lead.status),1)]),_:1},8,["color"])]),l("div",Ce,[e[32]||(e[32]=l("div",{class:"text-caption text-medium-emphasis mb-1"},"Lead Score",-1)),l("div",ye,[t(Y,{"model-value":s.lead.score,color:s.lead.score>=70?"success":s.lead.score>=40?"warning":"error",height:"8",rounded:"",class:"mr-4"},null,8,["model-value","color"]),l("span",ke,i(s.lead.score)+"%",1)])]),t(D,{class:"mb-6"}),l("div",Ve,[e[33]||(e[33]=l("div",{class:"text-caption text-medium-emphasis"},"Lead Source",-1)),l("div",Se,i(s.lead.lead_source?.name||"Unknown"),1)]),l("div",null,[e[34]||(e[34]=l("div",{class:"text-caption text-medium-emphasis"},"Lead Owner",-1)),l("div",Le,[t(z,{size:"24",color:"primary",class:"mr-2"},{default:a(()=>[l("span",Te,i(s.lead.owner?.name[0]),1)]),_:1}),l("span",$e,i(s.lead.owner?.name),1)])])]),_:1}),t(g,{title:"System Information"},{default:a(()=>[l("div",Ae,[e[35]||(e[35]=l("div",{class:"text-caption text-medium-emphasis"},"Created By",-1)),l("div",Pe,i(s.lead.creator?.name||"System"),1)]),l("div",Ne,[e[36]||(e[36]=l("div",{class:"text-caption text-medium-emphasis"},"Created At",-1)),l("div",ze,i(new Date(s.lead.created_at).toLocaleString()),1)]),l("div",null,[e[37]||(e[37]=l("div",{class:"text-caption text-medium-emphasis"},"Last Updated",-1)),l("div",De,i(new Date(s.lead.updated_at).toLocaleString()),1)])]),_:1})]),_:1})]),_:1}),s.lead?(m(),y(X,{key:0,show:p.value,lead:s.lead,"deal-stages":s.dealStages,onClose:e[5]||(e[5]=d=>p.value=!1),onConverted:R},null,8,["show","lead","deal-stages"])):b("",!0),t($,{modelValue:f.value,"onUpdate:modelValue":e[8]||(e[8]=d=>f.value=d),"max-width":"700px"},{default:a(()=>[t(C,null,{default:a(()=>[t(L,{class:"pa-4 bg-warning text-white d-flex justify-space-between align-center"},{default:a(()=>[l("span",null,"Log Engagement for "+i(s.lead.full_name),1),t(o,{icon:"mdi-close",variant:"text",size:"small",onClick:e[6]||(e[6]=d=>f.value=!1)})]),_:1}),t(T,{class:"pa-4 pt-6"},{default:a(()=>[t(ee,{"engageable-type":"App\\Models\\Lead","engageable-id":s.lead.id,onSuccess:e[7]||(e[7]=d=>f.value=!1)},null,8,["engageable-id"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t($,{modelValue:v.value,"onUpdate:modelValue":e[11]||(e[11]=d=>v.value=d),"max-width":"500px"},{default:a(()=>[t(C,null,{default:a(()=>[t(L,{class:"pa-4 bg-warning text-white d-flex justify-space-between align-center"},{default:a(()=>[e[38]||(e[38]=l("span",null,"Convert to Partner",-1)),t(o,{icon:"mdi-close",variant:"text",size:"small",onClick:e[9]||(e[9]=d=>v.value=!1)})]),_:1}),t(T,{class:"pa-6"},{default:a(()=>[l("div",Ee,[t(r,{color:"warning",size:"64",class:"mb-4"},{default:a(()=>[...e[39]||(e[39]=[n("mdi-handshake-outline",-1)])]),_:1}),e[42]||(e[42]=l("h3",{class:"text-h5 mb-2"},"Are you sure?",-1)),l("p",je,[e[40]||(e[40]=n(" This will convert ",-1)),l("strong",null,i(s.lead.full_name),1),e[41]||(e[41]=n(' into a Partner. The lead status will be updated to "converted". ',-1))])]),t(G,{type:"info",variant:"tonal",class:"mb-6"},{default:a(()=>[...e[43]||(e[43]=[n(" A new Partner record will be created using the lead's company and contact information. ",-1)])]),_:1})]),_:1}),t(j,{class:"pa-4 pt-0"},{default:a(()=>[t(M),t(o,{variant:"text",onClick:e[10]||(e[10]=d=>v.value=!1)},{default:a(()=>[...e[44]||(e[44]=[n("Cancel",-1)])]),_:1}),t(o,{color:"warning",loading:k.value,onClick:q},{default:a(()=>[...e[45]||(e[45]=[n(" Confirm Conversion ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t($,{modelValue:c.value,"onUpdate:modelValue":e[14]||(e[14]=d=>c.value=d),"max-width":"500px"},{default:a(()=>[t(C,null,{default:a(()=>[t(L,{class:"pa-4 bg-info text-white d-flex justify-space-between align-center"},{default:a(()=>[e[46]||(e[46]=l("span",null,"Convert to Ticket",-1)),t(o,{icon:"mdi-close",variant:"text",size:"small",onClick:e[12]||(e[12]=d=>c.value=!1)})]),_:1}),t(T,{class:"pa-6"},{default:a(()=>[l("div",Me,[t(r,{color:"info",size:"64",class:"mb-4"},{default:a(()=>[...e[47]||(e[47]=[n("mdi-ticket-outline",-1)])]),_:1}),e[50]||(e[50]=l("h3",{class:"text-h5 mb-2"},"Create Support Ticket?",-1)),l("p",Ue,[e[48]||(e[48]=n(" This will create a support ticket for ",-1)),l("strong",null,i(s.lead.full_name),1),e[49]||(e[49]=n(". Useful for tracking inquiries or issues before conversion. ",-1))])])]),_:1}),t(j,{class:"pa-4 pt-0"},{default:a(()=>[t(M),t(o,{variant:"text",onClick:e[13]||(e[13]=d=>c.value=!1)},{default:a(()=>[...e[51]||(e[51]=[n("Cancel",-1)])]),_:1}),t(o,{color:"info",loading:V.value,onClick:O},{default:a(()=>[...e[52]||(e[52]=[n(" Confirm Ticket Creation ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Ie=te(Be,[["__scopeId","data-v-cca5adac"]]),Je={__name:"Show",props:{lead:Object,dealStages:Array},setup(s){return(x,P)=>(m(),y(F,null,{default:a(()=>[t(Ie,J(K(x.$props)),null,16)]),_:1}))}};export{Je as default};
