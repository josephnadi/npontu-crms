import{r as v,D as z,o as r,M as p,b as t,u as _,T as E,a as l,l as L,k as S,m as f,n as N,p as V,h as s,i as b,f as o,g as P,$ as T,v as D,a4 as $,as as R,U as x,O as F,S as I,W,N as Y,R as i,Y as Z,aj as G,q as H,s as h,Z as k,a7 as J,c as K,a9 as Q,a8 as w}from"./app-CqcLQhWc.js";import{_ as X}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-SEMuvBU0.js";import{l as ee}from"./lodash-CdjocJhF.js";import{_ as te}from"./LoaderWrapper-CNYIpUw8.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-BnGuLdGC.js";import"./useApi-o-nPpLEi-7nyp_4n4.js";const le={key:0},se={colspan:"5",class:"text-center py-10"},ae={key:1},oe={colspan:"5",class:"text-center py-10"},ne={class:"py-4"},ie={class:"d-flex flex-column"},ue={class:"text-caption text-medium-emphasis text-truncate",style:{"max-width":"300px"}},re={class:"d-flex align-center"},de={class:"text-body-2"},me={class:"text-center"},ce={class:"d-flex justify-center gap-4"},pe={class:"d-flex flex-column"},fe={class:"text-body-2 font-weight-bold"},xe={class:"d-flex flex-column"},ve={class:"text-body-2 font-weight-bold text-success"},ge={class:"d-flex flex-column"},ye={class:"text-body-2 font-weight-bold text-info"},_e={class:"text-right"},Ve={__name:"Index",props:{automations:Object,filters:Object},setup(u){const g=u,d=v(g.filters.search||""),m=v(g.filters.type||""),c=v(g.filters.status||""),y=v(!1),j=[{title:"All Types",value:""},{title:"Email Campaign",value:"email_campaign"},{title:"Drip Sequence",value:"drip_sequence"},{title:"Newsletter",value:"newsletter"},{title:"SMS Alert",value:"sms_alert"}],B=[{title:"All Statuses",value:""},{title:"Draft",value:"draft"},{title:"Active",value:"active"},{title:"Paused",value:"paused"},{title:"Completed",value:"completed"}],C=()=>{y.value=!0,w.get(route("crm.marketing-automations.index"),{search:d.value,type:m.value,status:c.value},{preserveState:!0,replace:!0,onFinish:()=>y.value=!1})},M=()=>{d.value="",m.value="",c.value="",C()},O=n=>{confirm("Are you sure you want to delete this automation?")&&w.delete(route("crm.marketing-automations.destroy",n))},U=n=>{switch(n){case"draft":return"grey";case"active":return"success";case"paused":return"warning";case"completed":return"info";default:return"grey"}},q=n=>{switch(n){case"email_campaign":return"mdi-email-outline";case"drip_sequence":return"mdi-email-sync-outline";case"newsletter":return"mdi-newspaper-variant-outline";case"sms_alert":return"mdi-cellphone-message";default:return"mdi-robot-outline"}};return z([d,m,c],ee.debounce(()=>{C()},500)),(n,e)=>(r(),p(I,null,[t(_(E),{title:"Marketing Automations"}),t(X,null,{default:l(()=>[t(L,{fluid:""},{default:l(()=>[t(S,null,{default:l(()=>[t(f,{cols:"12"},{default:l(()=>[t(N,{elevation:"0",class:"mb-6"},{default:l(()=>[t(V,{class:"d-flex align-center justify-space-between py-4"},{default:l(()=>[e[6]||(e[6]=s("div",null,[s("h1",{class:"text-h4 mb-1"},"Marketing Automations"),s("p",{class:"text-subtitle-1 text-medium-emphasis"},"Automate your marketing workflows and campaigns.")],-1)),t(b,{color:"primary","prepend-icon":"mdi-plus",to:n.route("crm.marketing-automations.create")},{default:l(()=>[...e[5]||(e[5]=[o(" New Automation ",-1)])]),_:1},8,["to"])]),_:1})]),_:1}),t(N,{elevation:"0"},{default:l(()=>[t(V,{class:"pa-4"},{default:l(()=>[t(S,null,{default:l(()=>[t(f,{cols:"12",sm:"4"},{default:l(()=>[t(P,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search automations...",variant:"outlined",density:"comfortable","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",sm:"3"},{default:l(()=>[t(T,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=a=>m.value=a),items:j,label:"Type",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",sm:"3"},{default:l(()=>[t(T,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=a=>c.value=a),items:B,label:"Status",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",sm:"2",class:"d-flex align-center"},{default:l(()=>[t(b,{variant:"text",color:"primary",onClick:M,block:""},{default:l(()=>[...e[7]||(e[7]=[o(" Clear ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),t(D),t($,{hover:""},{default:l(()=>[e[19]||(e[19]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Automation Name"),s("th",{class:"text-left"},"Type"),s("th",{class:"text-left"},"Status"),s("th",{class:"text-center"},"Sent / Open / Click"),s("th",{class:"text-right"},"Actions")])],-1)),s("tbody",null,[y.value?(r(),p("tr",le,[s("td",se,[t(R,{indeterminate:"",color:"primary"})])])):u.automations.data.length===0?(r(),p("tr",ae,[s("td",oe,[t(x,{size:"64",color:"medium-emphasis",class:"mb-4"},{default:l(()=>[...e[8]||(e[8]=[o("mdi-robot-outline",-1)])]),_:1}),e[9]||(e[9]=s("p",{class:"text-h6 text-medium-emphasis"},"No automations found.",-1))])])):F("",!0),(r(!0),p(I,null,W(u.automations.data,a=>(r(),p("tr",{key:a.id},[s("td",ne,[s("div",ie,[t(_(Y),{href:n.route("crm.marketing-automations.show",a.id),class:"text-subtitle-1 font-weight-bold text-decoration-none text-primary"},{default:l(()=>[o(i(a.name),1)]),_:2},1032,["href"]),s("span",ue,i(a.description||"No description"),1)])]),s("td",null,[s("div",re,[t(x,{size:"small",class:"mr-2"},{default:l(()=>[o(i(q(a.type)),1)]),_:2},1024),s("span",de,i(a.type.replace("_"," ")),1)])]),s("td",null,[t(Z,{color:U(a.status),size:"x-small",label:"",class:"text-uppercase font-weight-bold"},{default:l(()=>[o(i(a.status),1)]),_:2},1032,["color"])]),s("td",me,[s("div",ce,[s("div",pe,[s("span",fe,i(a.sent_count),1),e[10]||(e[10]=s("span",{class:"text-caption text-medium-emphasis"},"Sent",-1))]),s("div",xe,[s("span",ve,i(a.open_count),1),e[11]||(e[11]=s("span",{class:"text-caption text-medium-emphasis"},"Opens",-1))]),s("div",ge,[s("span",ye,i(a.click_count),1),e[12]||(e[12]=s("span",{class:"text-caption text-medium-emphasis"},"Clicks",-1))])])]),s("td",_e,[t(G,null,{activator:l(({props:A})=>[t(b,J({icon:"mdi-pencil",size:"small"},{ref_for:!0},A),null,16)]),default:l(()=>[t(H,null,{default:l(()=>[t(h,{to:n.route("crm.marketing-automations.show",a.id)},{prepend:l(()=>[t(x,null,{default:l(()=>[...e[13]||(e[13]=[o("mdi-eye",-1)])]),_:1})]),default:l(()=>[t(k,null,{default:l(()=>[...e[14]||(e[14]=[o("View Details",-1)])]),_:1})]),_:1},8,["to"]),t(h,{to:n.route("crm.marketing-automations.edit",a.id)},{prepend:l(()=>[t(x,null,{default:l(()=>[...e[15]||(e[15]=[o("mdi-pencil",-1)])]),_:1})]),default:l(()=>[t(k,null,{default:l(()=>[...e[16]||(e[16]=[o("Edit Automation",-1)])]),_:1})]),_:1},8,["to"]),t(h,{onClick:A=>O(a.id)},{prepend:l(()=>[t(x,null,{default:l(()=>[...e[17]||(e[17]=[o("mdi-delete",-1)])]),_:1})]),default:l(()=>[t(k,null,{default:l(()=>[...e[18]||(e[18]=[o("Delete Automation",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128))])]),_:1}),t(D),u.automations.links.length>3?(r(),K(V,{key:0,class:"pa-4 d-flex justify-center"},{default:l(()=>[t(Q,{modelValue:u.automations.current_page,"onUpdate:modelValue":[e[3]||(e[3]=a=>u.automations.current_page=a),e[4]||(e[4]=a=>_(w).get(n.route("crm.marketing-automations.index",{page:a})))],length:u.automations.last_page,"total-visible":"7",rounded:"circle"},null,8,["modelValue","length"])]),_:1})):F("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64))}},Se=te(Ve,[["__scopeId","data-v-0a3b2c74"]]);export{Se as default};
