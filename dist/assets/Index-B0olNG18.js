import{C as $,a7 as y,ai as U,k as F,o as p,N as D,b as e,v as o,U as G,a as t,l as H,n as r,h as l,O as c,j as h,f as i,p as m,a5 as g,W as f,S as d,aa as C,q as I,x as q,s as z,T as B,X as E,c as k,t as x,$ as V,aj as X,Z as W,a6 as Z,P as S,a8 as J,_ as K,G as b}from"./app-CajJQkEm.js";import{_ as Q}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CUimra8q.js";import{_ as Y}from"./LoaderWrapper-CM7phn5N.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-CbPhcYUv.js";const ee={class:"d-flex gap-2"},te={class:"d-flex align-center mb-2"},se={class:"text-h4 font-weight-bold counter-value text-high-emphasis"},ae={class:"text-caption text-success mt-1"},le={class:"d-flex align-center mb-2"},ie={class:"text-h4 font-weight-bold counter-value text-high-emphasis"},ne={class:"text-caption text-success mt-1"},oe={class:"d-flex align-center mb-2"},re={class:"text-h4 font-weight-bold counter-value text-high-emphasis"},de={class:"d-flex align-center mb-2"},ue={class:"text-h4 font-weight-bold counter-value text-high-emphasis"},ce={class:"d-flex align-center"},me={class:"text-right mr-3"},fe={class:"text-caption font-weight-medium"},pe={__name:"Index",props:{metrics:Object,pipelineData:Array,activityBreakdown:Array,recentActivities:Array},setup(u){const v=u;let _;$(()=>{_=setInterval(()=>{y.reload({only:["metrics","pipelineData","activityBreakdown","recentActivities"],preserveScroll:!0})},3e4)}),U(()=>{_&&clearInterval(_)});const L=a=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(a),O=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),N=b(()=>({chart:{type:"bar",height:350,toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,horizontal:!0,distributed:!0,barHeight:"80%"}},colors:["#4680ff","#2ca87f","#e58a00","#dc2626","#673ab7","#3ec9d6"],dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},formatter:function(a,s){return s.w.globals.labels[s.dataPointIndex]+": "+a},offsetX:0},xaxis:{categories:v.pipelineData.map(a=>a.name)},yaxis:{labels:{show:!1}},grid:{borderColor:"#f1f1f1"}})),j=b(()=>[{name:"Deals",data:v.pipelineData.map(a=>a.count)}]),P=b(()=>({chart:{type:"donut",height:300},labels:v.activityBreakdown.map(a=>a.type.charAt(0).toUpperCase()+a.type.slice(1)),colors:["#4680ff","#2ca87f","#e58a00","#dc2626","#673ab7"],legend:{position:"bottom"},plotOptions:{pie:{donut:{size:"70%"}}}})),T=b(()=>v.activityBreakdown.map(a=>a.count)),M=a=>{switch(a){case"call":return"custom-phone";case"meeting":return"custom-user-fill";case"email":return"custom-mail";case"note":return"custom-file-text";default:return"custom-notification"}},R=a=>{switch(a){case"call":return"primary";case"meeting":return"success";case"email":return"warning";case"note":return"info";default:return"secondary"}};return(a,s)=>{const A=F("apexchart");return p(),D(B,null,[e(o(G),{title:"CRM Dashboard"}),e(Q,null,{default:t(()=>[e(H,null,{default:t(()=>[e(r,{cols:"12",class:"d-flex justify-space-between align-center mb-4"},{default:t(()=>[s[2]||(s[2]=l("div",null,[l("h2",{class:"text-h3 font-weight-bold"},"CRM Dashboard"),l("p",{class:"text-subtitle-1 text-medium-emphasis"},"Overview of your sales and activities")],-1)),l("div",ee,[e(o(c),{href:a.route("crm.deals.create")},{default:t(()=>[e(h,{color:"primary","prepend-icon":"mdi-plus"},{default:t(()=>[...s[0]||(s[0]=[i("Add Deal",-1)])]),_:1})]),_:1},8,["href"]),e(o(c),{href:a.route("crm.activities.create")},{default:t(()=>[e(h,{variant:"outlined",color:"primary","prepend-icon":"mdi-calendar-plus"},{default:t(()=>[...s[1]||(s[1]=[i("Log Activity",-1)])]),_:1})]),_:1},8,["href"])])]),_:1}),e(r,{cols:"12",sm:"6",lg:"3"},{default:t(()=>[e(o(c),{href:a.route("crm.contacts.index"),class:"text-decoration-none"},{default:t(()=>[e(m,{class:"pa-4 stat-card",elevation:"2"},{default:t(()=>[l("div",te,[e(g,{color:"blue-lighten-5",size:"40",class:"mr-3 icon-avatar"},{default:t(()=>[e(f,{color:"primary"},{default:t(()=>[...s[3]||(s[3]=[i("mdi-account-group",-1)])]),_:1})]),_:1}),s[4]||(s[4]=l("span",{class:"text-subtitle-2 font-weight-medium text-high-emphasis"},"Total Contacts",-1))]),l("div",se,d(u.metrics.totalContacts),1),l("div",ae,[e(f,{size:"small"},{default:t(()=>[...s[5]||(s[5]=[i("mdi-trending-up",-1)])]),_:1}),s[6]||(s[6]=i(" 12% from last month ",-1))])]),_:1})]),_:1},8,["href"])]),_:1}),e(r,{cols:"12",sm:"6",lg:"3"},{default:t(()=>[e(o(c),{href:a.route("crm.deals.pipeline"),class:"text-decoration-none"},{default:t(()=>[e(m,{class:"pa-4 stat-card",elevation:"2"},{default:t(()=>[l("div",le,[e(g,{color:"green-lighten-5",size:"40",class:"mr-3 icon-avatar"},{default:t(()=>[e(f,{color:"success"},{default:t(()=>[...s[7]||(s[7]=[i("mdi-briefcase-check",-1)])]),_:1})]),_:1}),s[8]||(s[8]=l("span",{class:"text-subtitle-2 font-weight-medium text-high-emphasis"},"Open Deals",-1))]),l("div",ie,d(u.metrics.openDeals),1),l("div",ne,[e(f,{size:"small"},{default:t(()=>[...s[9]||(s[9]=[i("mdi-trending-up",-1)])]),_:1}),s[10]||(s[10]=i(" 5 new this week ",-1))])]),_:1})]),_:1},8,["href"])]),_:1}),e(r,{cols:"12",sm:"6",lg:"3"},{default:t(()=>[e(o(c),{href:a.route("crm.deals.index"),class:"text-decoration-none"},{default:t(()=>[e(m,{class:"pa-4 stat-card",elevation:"2"},{default:t(()=>[l("div",oe,[e(g,{color:"orange-lighten-5",size:"40",class:"mr-3 icon-avatar"},{default:t(()=>[e(f,{color:"warning"},{default:t(()=>[...s[11]||(s[11]=[i("mdi-currency-usd",-1)])]),_:1})]),_:1}),s[12]||(s[12]=l("span",{class:"text-subtitle-2 font-weight-medium text-high-emphasis"},"Pipeline Value",-1))]),l("div",re,d(L(u.metrics.totalValue)),1),s[13]||(s[13]=l("div",{class:"text-caption text-warning mt-1"}," Expected by end of quarter ",-1))]),_:1})]),_:1},8,["href"])]),_:1}),e(r,{cols:"12",sm:"6",lg:"3"},{default:t(()=>[e(o(c),{href:a.route("crm.activities.index"),class:"text-decoration-none"},{default:t(()=>[e(m,{class:"pa-4 stat-card",elevation:"2"},{default:t(()=>[l("div",de,[e(g,{color:"purple-lighten-5",size:"40",class:"mr-3 icon-avatar"},{default:t(()=>[e(f,{color:"secondary"},{default:t(()=>[...s[14]||(s[14]=[i("mdi-calendar-clock",-1)])]),_:1})]),_:1}),s[15]||(s[15]=l("span",{class:"text-subtitle-2 font-weight-medium text-high-emphasis"},"Pending Tasks",-1))]),l("div",ue,d(u.metrics.pendingActivities),1),s[16]||(s[16]=l("div",{class:"text-caption text-error mt-1"}," 3 overdue items ",-1))]),_:1})]),_:1},8,["href"])]),_:1}),e(r,{cols:"12",md:"8"},{default:t(()=>[e(m,{elevation:"2"},{default:t(()=>[e(C,{title:"Sales Pipeline Funnel"},{append:t(()=>[e(h,{icon:"",variant:"text",size:"small"},{default:t(()=>[e(f,null,{default:t(()=>[...s[17]||(s[17]=[i("mdi-dots-vertical",-1)])]),_:1})]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(A,{type:"bar",height:"350",options:N.value,series:j.value},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:t(()=>[e(m,{elevation:"2",height:"100%"},{default:t(()=>[e(C,{title:"Activity Breakdown"}),e(I,{class:"d-flex flex-column align-center justify-center pt-8"},{default:t(()=>[e(A,{type:"donut",width:"100%",options:P.value,series:T.value},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(m,{elevation:"2"},{default:t(()=>[e(C,{title:"Recent Activities"},{append:t(()=>[e(o(c),{href:a.route("crm.activities.index")},{default:t(()=>[e(h,{variant:"text",color:"primary"},{default:t(()=>[...s[18]||(s[18]=[i("View All",-1)])]),_:1})]),_:1},8,["href"])]),_:1}),e(q),e(z,{lines:"two"},{default:t(()=>[(p(!0),D(B,null,E(u.recentActivities,n=>(p(),k(x,{key:n.id,"prepend-icon":null},{prepend:t(()=>[e(g,{color:R(n.type),size:"40",class:"mr-4"},{default:t(()=>[e(K,{name:M(n.type),style:{width:"20px",height:"20px",color:"white"}},null,8,["name"])]),_:2},1032,["color"])]),append:t(()=>[l("div",ce,[l("div",me,[l("div",fe,d(O(n.created_at)),1),e(W,{size:"x-small",color:n.status==="completed"?"success":"warning",variant:"flat",class:"mt-1"},{default:t(()=>[i(d(n.status),1)]),_:2},1032,["color"])]),e(Z,null,{activator:t(({props:w})=>[e(h,J({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},w),null,16)]),default:t(()=>[e(z,{size:"small"},{default:t(()=>[n.status==="pending"?(p(),k(x,{key:0,onClick:w=>o(y).put(a.route("crm.activities.update",n.id),{...n,status:"completed"}),"prepend-icon":"mdi-check",color:"success"},{default:t(()=>[e(V,null,{default:t(()=>[...s[19]||(s[19]=[i("Mark Completed",-1)])]),_:1})]),_:1},8,["onClick"])):S("",!0),e(x,{onClick:w=>o(y).delete(a.route("crm.activities.destroy",n.id)),"prepend-icon":"mdi-delete",color:"error"},{default:t(()=>[e(V,null,{default:t(()=>[...s[20]||(s[20]=[i("Delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])]),default:t(()=>[e(V,{class:"font-weight-bold"},{default:t(()=>[i(d(n.subject),1)]),_:2},1024),e(X,null,{default:t(()=>[i(d(n.description),1)]),_:2},1024)]),_:2},1024))),128)),u.recentActivities.length===0?(p(),k(x,{key:0,class:"text-center py-8"},{default:t(()=>[...s[21]||(s[21]=[l("div",{class:"text-medium-emphasis"},"No recent activities found",-1)])]),_:1})):S("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}},be=Y(pe,[["__scopeId","data-v-4d0a7feb"]]);export{be as default};
