import{M as z,o as y,N as C,b as t,v as i,U as h,a,l as w,n as f,h as l,O as A,j as u,W as _,f as r,S as n,Z as I,c as j,P as S,p as v,aa as g,x as b,q as x,aM as B,a5 as M,af as k,ag as N,Q as D,aR as E,g as L,a0 as F,aK as O,aL as P,T as q,r as T}from"./app-CajJQkEm.js";import{_ as R}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CUimra8q.js";import{A as G,_ as H}from"./ActivityForm-z_B-xygN.js";import"./LoaderWrapper-CM7phn5N.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-CbPhcYUv.js";const J={class:"d-flex align-center"},K={class:"text-h3 font-weight-bold"},Q={class:"d-flex align-center text-subtitle-1 text-medium-emphasis"},W={class:"d-flex gap-2"},Y={class:"mb-4 text-center"},Z={class:"text-h6 font-weight-bold"},X={class:"mb-4"},ee={class:"text-body-2"},te={class:"mb-4"},ae={class:"text-body-2"},le={class:"mb-4"},se={class:"text-body-2"},de={class:"mb-4"},ie={class:"text-body-2"},oe={class:"mb-4"},ne={class:"text-body-2"},re={class:"mb-0"},ue={class:"d-flex align-center"},me={class:"text-caption text-white"},ce={class:"text-body-2"},fe={class:"text-body-2",style:{"white-space":"pre-wrap"}},ve={key:0},ge={__name:"Show",props:{lead:Object,dealStages:Array},setup(s){const p=s,m=T(!1),c=T(!1),o=z({create_client:!0,create_deal:!0,deal_title:`${p.lead.company_name||p.lead.first_name} Deal`,deal_value:0,deal_stage_id:p.dealStages[0]?.id||null}),U=()=>{o.post(route("crm.leads.convert",p.lead.id),{onSuccess:()=>{m.value=!1}})},$=V=>{switch(V){case"new":return"info";case"contacted":return"warning";case"qualified":return"success";case"converted":return"primary";case"lost":return"error";default:return"grey"}};return(V,e)=>(y(),C(q,null,[t(i(h),{title:"Lead Details - "+s.lead.first_name},null,8,["title"]),t(R,null,{default:a(()=>[t(w,null,{default:a(()=>[t(f,{cols:"12",class:"d-flex justify-space-between align-center mb-4"},{default:a(()=>[l("div",J,[t(i(A),{href:V.route("crm.leads.index"),class:"mr-4"},{default:a(()=>[t(u,{icon:"",variant:"text"},{default:a(()=>[t(_,null,{default:a(()=>[...e[12]||(e[12]=[r("mdi-arrow-left",-1)])]),_:1})]),_:1})]),_:1},8,["href"]),l("div",null,[l("h2",K,n(s.lead.first_name)+" "+n(s.lead.last_name),1),l("div",Q,[t(I,{color:$(s.lead.status),size:"small",variant:"flat",class:"text-capitalize mr-3"},{default:a(()=>[r(n(s.lead.status),1)]),_:1},8,["color"]),t(_,{size:"small",class:"mr-1"},{default:a(()=>[...e[13]||(e[13]=[r("mdi-domain",-1)])]),_:1}),r(" "+n(s.lead.company_name||"Individual"),1)])])]),l("div",W,[s.lead.status!=="converted"?(y(),j(u,{key:0,color:"success","prepend-icon":"mdi-account-convert",onClick:e[0]||(e[0]=d=>m.value=!0),class:"mr-2"},{default:a(()=>[...e[14]||(e[14]=[r(" Convert to Contact ",-1)])]),_:1})):S("",!0),t(i(A),{href:V.route("crm.leads.edit",s.lead.id)},{default:a(()=>[t(u,{variant:"outlined",color:"primary","prepend-icon":"mdi-pencil"},{default:a(()=>[...e[15]||(e[15]=[r("Edit Lead",-1)])]),_:1})]),_:1},8,["href"])])]),_:1}),t(f,{cols:"12",md:"4"},{default:a(()=>[t(v,{elevation:"0",border:"",class:"mb-6"},{default:a(()=>[t(g,{title:"Lead Information"}),t(b),t(x,{class:"pa-4"},{default:a(()=>[l("div",Y,[e[16]||(e[16]=l("div",{class:"text-caption text-medium-emphasis mb-1"},"Lead Score",-1)),t(B,{"model-value":s.lead.score,color:s.lead.score>70?"success":s.lead.score>40?"warning":"error",size:"80",width:"8"},{default:a(()=>[l("span",Z,n(s.lead.score)+"%",1)]),_:1},8,["model-value","color"])]),t(b,{class:"mb-4"}),l("div",X,[e[17]||(e[17]=l("div",{class:"text-caption text-medium-emphasis mb-1"},"Email",-1)),l("div",ee,n(s.lead.email||"N/A"),1)]),l("div",te,[e[18]||(e[18]=l("div",{class:"text-caption text-medium-emphasis mb-1"},"Phone",-1)),l("div",ae,n(s.lead.phone||"N/A"),1)]),l("div",le,[e[19]||(e[19]=l("div",{class:"text-caption text-medium-emphasis mb-1"},"Job Title",-1)),l("div",se,n(s.lead.job_title||"N/A"),1)]),l("div",de,[e[20]||(e[20]=l("div",{class:"text-caption text-medium-emphasis mb-1"},"Source",-1)),l("div",ie,n(s.lead.source||"N/A"),1)]),l("div",oe,[e[21]||(e[21]=l("div",{class:"text-caption text-medium-emphasis mb-1"},"Created At",-1)),l("div",ne,n(new Date(s.lead.created_at).toLocaleDateString()),1)]),l("div",re,[e[22]||(e[22]=l("div",{class:"text-caption text-medium-emphasis mb-1"},"Owner",-1)),l("div",ue,[t(M,{size:"24",color:"primary",class:"mr-2"},{default:a(()=>[l("span",me,n(s.lead.owner?.name.charAt(0)),1)]),_:1}),l("span",ce,n(s.lead.owner?.name),1)])])]),_:1})]),_:1}),t(v,{elevation:"0",border:""},{default:a(()=>[t(g,{title:"Internal Notes"}),t(b),t(x,{class:"pa-4"},{default:a(()=>[l("p",fe,n(s.lead.notes||"No notes available for this lead."),1)]),_:1})]),_:1})]),_:1}),t(f,{cols:"12",md:"8"},{default:a(()=>[t(v,{elevation:"0",border:"",class:"mb-6"},{default:a(()=>[t(g,{title:"Activity Timeline"},{append:a(()=>[t(u,{color:"primary",size:"small",variant:"flat","prepend-icon":"mdi-plus",onClick:e[1]||(e[1]=d=>c.value=!0)},{default:a(()=>[...e[23]||(e[23]=[r(" Log Activity ",-1)])]),_:1})]),_:1}),t(b),t(x,{class:"pa-4"},{default:a(()=>[t(G,{activities:s.lead.activities},null,8,["activities"])]),_:1})]),_:1})]),_:1})]),_:1}),t(k,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=d=>c.value=d),"max-width":"600px"},{default:a(()=>[t(v,null,{default:a(()=>[t(N,{class:"pa-4 bg-primary text-white d-flex justify-space-between align-center"},{default:a(()=>[e[24]||(e[24]=l("span",null,"Log New Activity",-1)),t(u,{icon:"mdi-close",variant:"text",size:"small",onClick:e[2]||(e[2]=d=>c.value=!1)})]),_:1}),t(x,{class:"pa-4 pt-6"},{default:a(()=>[t(H,{"activityable-type":"App\\Models\\Lead","activityable-id":s.lead.id,onSuccess:e[3]||(e[3]=d=>c.value=!1)},null,8,["activityable-id"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(k,{modelValue:m.value,"onUpdate:modelValue":e[11]||(e[11]=d=>m.value=d),"max-width":"600px"},{default:a(()=>[t(v,null,{default:a(()=>[t(N,{class:"pa-4 bg-primary text-white"},{default:a(()=>[...e[25]||(e[25]=[r(" Convert Lead to Contact ",-1)])]),_:1}),t(x,{class:"pa-4 pt-6"},{default:a(()=>[e[26]||(e[26]=l("p",{class:"mb-4"},[r("Converting this lead will create a new "),l("strong",null,"Contact"),r(". You can also optionally create a Client and a Deal.")],-1)),t(D,{modelValue:i(o).create_client,"onUpdate:modelValue":e[5]||(e[5]=d=>i(o).create_client=d),label:"Create new Client from company","hide-details":"",class:"mb-2",disabled:!s.lead.company_name},null,8,["modelValue","disabled"]),t(D,{modelValue:i(o).create_deal,"onUpdate:modelValue":e[6]||(e[6]=d=>i(o).create_deal=d),label:"Create a new Deal for this contact","hide-details":"",class:"mb-4"},null,8,["modelValue"]),t(E,null,{default:a(()=>[i(o).create_deal?(y(),C("div",ve,[t(L,{modelValue:i(o).deal_title,"onUpdate:modelValue":e[7]||(e[7]=d=>i(o).deal_title=d),label:"Deal Title",variant:"outlined",class:"mb-4"},null,8,["modelValue"]),t(w,null,{default:a(()=>[t(f,{cols:"6"},{default:a(()=>[t(L,{modelValue:i(o).deal_value,"onUpdate:modelValue":e[8]||(e[8]=d=>i(o).deal_value=d),label:"Deal Value",type:"number",prefix:"GHâ‚µ",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(f,{cols:"6"},{default:a(()=>[t(F,{modelValue:i(o).deal_stage_id,"onUpdate:modelValue":e[9]||(e[9]=d=>i(o).deal_stage_id=d),items:s.dealStages,"item-title":"name","item-value":"id",label:"Initial Stage",variant:"outlined"},null,8,["modelValue","items"])]),_:1})]),_:1})])):S("",!0)]),_:1})]),_:1}),t(b),t(O,{class:"pa-4"},{default:a(()=>[t(P),t(u,{variant:"text",onClick:e[10]||(e[10]=d=>m.value=!1)},{default:a(()=>[...e[27]||(e[27]=[r("Cancel",-1)])]),_:1}),t(u,{color:"success",variant:"flat",loading:i(o).processing,onClick:U},{default:a(()=>[...e[28]||(e[28]=[r(" Confirm Conversion ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64))}};export{ge as default};
