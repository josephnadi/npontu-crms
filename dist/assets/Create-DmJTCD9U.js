import{M as y,o as x,N as v,b as e,v as t,U as C,a as r,l as p,n as i,h as c,O as f,j as u,_ as w,p as U,V as D,w as k,g as m,a2 as N,a0 as S,a1 as _,ak as T,f as b,T as q}from"./app-CajJQkEm.js";import{_ as A}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CUimra8q.js";import{_ as B}from"./LoaderWrapper-CM7phn5N.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-CbPhcYUv.js";const F={class:"mb-6 d-flex align-center"},$={__name:"Create",props:{stages:{type:Array,required:!0},contacts:{type:Array,default:()=>[]},clients:{type:Array,default:()=>[]}},setup(d){const n=d,l=y({title:"",description:"",value:0,deal_stage_id:n.stages[0]?.id||null,contact_id:null,client_id:null,contact_name:"",client_name:"",expected_close_date:null,probability:n.stages[0]?.probability||0}),V=()=>{l.post(window.route("crm.deals.store"),{onSuccess:()=>l.reset()})},g=()=>{const o=n.stages.find(a=>a.id===l.deal_stage_id);o&&(l.probability=o.probability)};return(o,a)=>(x(),v(q,null,[e(t(C),{title:"Create Deal"}),e(A,null,{default:r(()=>[e(p,{justify:"center"},{default:r(()=>[e(i,{cols:"12",md:"8"},{default:r(()=>[c("div",F,[e(t(f),{href:o.route("crm.deals.pipeline"),class:"mr-4"},{default:r(()=>[e(u,{icon:"",variant:"text"},{default:r(()=>[e(w,{name:"custom-chevron-left",style:{width:"20px",height:"20px"}})]),_:1})]),_:1},8,["href"]),a[8]||(a[8]=c("h2",{class:"text-h4 font-weight-bold"},"Create New Deal",-1))]),e(U,{class:"pa-6"},{default:r(()=>[e(D,{onSubmit:k(V,["prevent"])},{default:r(()=>[e(p,null,{default:r(()=>[e(i,{cols:"12"},{default:r(()=>[e(m,{modelValue:t(l).title,"onUpdate:modelValue":a[0]||(a[0]=s=>t(l).title=s),label:"Deal Title","error-messages":t(l).errors.title,required:"",variant:"outlined","prepend-inner-icon":"mdi-briefcase-outline"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12"},{default:r(()=>[e(N,{modelValue:t(l).description,"onUpdate:modelValue":a[1]||(a[1]=s=>t(l).description=s),label:"Description","error-messages":t(l).errors.description,variant:"outlined",rows:"3","prepend-inner-icon":"mdi-text-box-outline"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",md:"6"},{default:r(()=>[e(m,{modelValue:t(l).value,"onUpdate:modelValue":a[2]||(a[2]=s=>t(l).value=s),label:"Deal Value",type:"number",prefix:"GHâ‚µ","error-messages":t(l).errors.value,required:"",variant:"outlined","prepend-inner-icon":"mdi-cash"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",md:"6"},{default:r(()=>[e(S,{modelValue:t(l).deal_stage_id,"onUpdate:modelValue":[a[3]||(a[3]=s=>t(l).deal_stage_id=s),g],items:d.stages,"item-title":"name","item-value":"id",label:"Stage","error-messages":t(l).errors.deal_stage_id,required:"",variant:"outlined","prepend-inner-icon":"mdi-stairs-up"},null,8,["modelValue","items","error-messages"])]),_:1}),e(i,{cols:"12",md:"6"},{default:r(()=>[e(_,{modelValue:t(l).contact_id,"onUpdate:modelValue":a[4]||(a[4]=s=>t(l).contact_id=s),items:d.contacts,"item-title":s=>`${s.first_name} ${s.last_name}`,"item-value":"id",label:"Contact","error-messages":t(l).errors.contact_id,variant:"outlined","prepend-inner-icon":"mdi-account-outline",clearable:""},null,8,["modelValue","items","item-title","error-messages"])]),_:1}),e(i,{cols:"12",md:"6"},{default:r(()=>[e(_,{modelValue:t(l).client_id,"onUpdate:modelValue":a[5]||(a[5]=s=>t(l).client_id=s),items:d.clients,"item-title":"name","item-value":"id",label:"Client / Company","error-messages":t(l).errors.client_id,variant:"outlined","prepend-inner-icon":"mdi-office-building-outline",clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),e(i,{cols:"12"},{default:r(()=>[e(m,{modelValue:t(l).expected_close_date,"onUpdate:modelValue":a[6]||(a[6]=s=>t(l).expected_close_date=s),label:"Expected Close Date",type:"date","error-messages":t(l).errors.expected_close_date,variant:"outlined","prepend-inner-icon":"mdi-calendar-clock"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12",md:"6"},{default:r(()=>[e(T,{modelValue:t(l).probability,"onUpdate:modelValue":a[7]||(a[7]=s=>t(l).probability=s),label:"Probability (%)",min:"0",max:"100",step:"5","thumb-label":"",color:"primary"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",class:"d-flex justify-end gap-2 mt-4"},{default:r(()=>[e(t(f),{href:o.route("crm.deals.pipeline"),class:"text-decoration-none mr-2"},{default:r(()=>[e(u,{variant:"text",disabled:t(l).processing},{default:r(()=>[...a[9]||(a[9]=[b("Cancel",-1)])]),_:1},8,["disabled"])]),_:1},8,["href"]),e(u,{color:"primary",type:"submit",loading:t(l).processing,size:"large"},{default:r(()=>[...a[10]||(a[10]=[b(" Create Deal ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64))}},z=B($,[["__scopeId","data-v-49945a69"]]);export{z as default};
