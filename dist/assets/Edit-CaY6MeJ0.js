import{M as v,o as c,N as U,b as t,v as e,U as w,a as s,l as f,n as d,h as n,O as _,j as u,_ as C,p as k,w as q,g as m,a2 as V,a0 as g,ak as D,c as S,P as B,a1 as b,f as y,T as E}from"./app-CajJQkEm.js";import{_ as N}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CUimra8q.js";import"./LoaderWrapper-CM7phn5N.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-CbPhcYUv.js";const T={class:"mb-6 d-flex align-center"},G={__name:"Edit",props:{deal:{type:Object,required:!0},stages:{type:Array,required:!0},contacts:{type:Array,default:()=>[]},clients:{type:Array,default:()=>[]}},setup(i){const o=i,l=v({title:o.deal.title,description:o.deal.description,value:o.deal.value,currency:o.deal.currency||"GHS",deal_stage_id:o.deal.deal_stage_id,probability:o.deal.probability,contact_id:o.deal.contact_id,client_id:o.deal.client_id,contact_name:o.deal.contact_name,client_name:o.deal.client_name,expected_close_date:o.deal.expected_close_date?o.deal.expected_close_date.split(" ")[0]:"",status:o.deal.status||"open",lost_reason:o.deal.lost_reason}),x=()=>{l.put(window.route("crm.deals.update",o.deal.id))};return(p,a)=>(c(),U(E,null,[t(e(w),{title:"Edit Deal"}),t(N,null,{default:s(()=>[t(f,{justify:"center"},{default:s(()=>[t(d,{cols:"12",md:"8",lg:"6"},{default:s(()=>[n("div",T,[t(e(_),{href:p.route("crm.deals.index"),class:"mr-4"},{default:s(()=>[t(u,{icon:"",variant:"text"},{default:s(()=>[t(C,{name:"custom-chevron-left",style:{width:"20px",height:"20px"}})]),_:1})]),_:1},8,["href"]),a[10]||(a[10]=n("h2",{class:"text-h4 font-weight-bold"},"Edit Deal",-1))]),t(k,{class:"pa-6"},{default:s(()=>[n("form",{onSubmit:q(x,["prevent"])},[t(f,null,{default:s(()=>[t(d,{cols:"12"},{default:s(()=>[t(m,{modelValue:e(l).title,"onUpdate:modelValue":a[0]||(a[0]=r=>e(l).title=r),label:"Deal Title",required:"","error-messages":e(l).errors.title,variant:"outlined","prepend-inner-icon":"mdi-briefcase-outline"},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12"},{default:s(()=>[t(V,{modelValue:e(l).description,"onUpdate:modelValue":a[1]||(a[1]=r=>e(l).description=r),label:"Description","error-messages":e(l).errors.description,variant:"outlined",rows:"3","prepend-inner-icon":"mdi-text-box-outline"},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12",md:"6"},{default:s(()=>[t(m,{modelValue:e(l).value,"onUpdate:modelValue":a[2]||(a[2]=r=>e(l).value=r),label:"Value",type:"number",prefix:"GHâ‚µ",required:"","error-messages":e(l).errors.value,variant:"outlined","prepend-inner-icon":"mdi-cash"},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12",md:"6"},{default:s(()=>[t(g,{modelValue:e(l).deal_stage_id,"onUpdate:modelValue":a[3]||(a[3]=r=>e(l).deal_stage_id=r),items:i.stages,"item-title":"name","item-value":"id",label:"Stage",required:"","error-messages":e(l).errors.deal_stage_id,variant:"outlined","prepend-inner-icon":"mdi-stairs-up"},null,8,["modelValue","items","error-messages"])]),_:1}),t(d,{cols:"12",md:"6"},{default:s(()=>[t(D,{modelValue:e(l).probability,"onUpdate:modelValue":a[4]||(a[4]=r=>e(l).probability=r),label:"Probability (%)","thumb-label":"",min:"0",max:"100",step:"5",color:"primary","error-messages":e(l).errors.probability,"prepend-icon":"mdi-percent-outline"},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12",md:"6"},{default:s(()=>[t(g,{modelValue:e(l).status,"onUpdate:modelValue":a[5]||(a[5]=r=>e(l).status=r),items:["open","won","lost"],label:"Status",required:"","error-messages":e(l).errors.status,variant:"outlined","prepend-inner-icon":"mdi-list-status"},null,8,["modelValue","error-messages"])]),_:1}),e(l).status==="lost"?(c(),S(d,{key:0,cols:"12"},{default:s(()=>[t(V,{modelValue:e(l).lost_reason,"onUpdate:modelValue":a[6]||(a[6]=r=>e(l).lost_reason=r),label:"Reason for Loss","error-messages":e(l).errors.lost_reason,variant:"outlined",rows:"2","prepend-inner-icon":"mdi-comment-question-outline"},null,8,["modelValue","error-messages"])]),_:1})):B("",!0),t(d,{cols:"12",md:"6"},{default:s(()=>[t(b,{modelValue:e(l).contact_id,"onUpdate:modelValue":a[7]||(a[7]=r=>e(l).contact_id=r),items:i.contacts,"item-title":r=>`${r.first_name} ${r.last_name}`,"item-value":"id",label:"Contact","error-messages":e(l).errors.contact_id,variant:"outlined","prepend-inner-icon":"mdi-account-outline",clearable:""},null,8,["modelValue","items","item-title","error-messages"])]),_:1}),t(d,{cols:"12",md:"6"},{default:s(()=>[t(b,{modelValue:e(l).client_id,"onUpdate:modelValue":a[8]||(a[8]=r=>e(l).client_id=r),items:i.clients,"item-title":"name","item-value":"id",label:"Client / Company","error-messages":e(l).errors.client_id,variant:"outlined","prepend-inner-icon":"mdi-office-building-outline",clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),t(d,{cols:"12"},{default:s(()=>[t(m,{modelValue:e(l).expected_close_date,"onUpdate:modelValue":a[9]||(a[9]=r=>e(l).expected_close_date=r),label:"Expected Close Date",type:"date","error-messages":e(l).errors.expected_close_date,variant:"outlined","prepend-inner-icon":"mdi-calendar-clock"},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12",class:"d-flex justify-end gap-2"},{default:s(()=>[t(e(_),{href:p.route("crm.deals.index"),class:"text-decoration-none mr-2"},{default:s(()=>[t(u,{variant:"outlined"},{default:s(()=>[...a[11]||(a[11]=[y("Cancel",-1)])]),_:1})]),_:1},8,["href"]),t(u,{type:"submit",color:"primary",loading:e(l).processing},{default:s(()=>[...a[12]||(a[12]=[y(" Update Deal ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})],32)]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{G as default};
