import{r as x,D as z,o as i,M as d,b as e,u as g,T as A,a as t,l as O,k as I,m as f,n as S,p as y,h as s,i as V,f as o,g as P,$ as E,v as N,a4 as M,as as $,U as p,O as b,S as j,W as R,N as q,R as u,X as W,Y as X,aj as Y,q as Z,s as h,Z as _,a7 as G,c as H,a9 as J,a8 as w}from"./app-CqcLQhWc.js";import{_ as K}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-SEMuvBU0.js";import{l as Q}from"./lodash-CdjocJhF.js";import"./LoaderWrapper-CNYIpUw8.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-BnGuLdGC.js";import"./useApi-o-nPpLEi-7nyp_4n4.js";const ee={key:0},te={colspan:"7",class:"text-center py-10"},le={key:1},se={colspan:"7",class:"text-center py-10"},ae={class:"py-4"},ne={class:"d-flex flex-column"},oe={class:"text-body-2 font-weight-bold"},re={key:0,class:"text-caption text-medium-emphasis"},ie={class:"font-weight-bold"},ue={class:"text-right"},xe={__name:"Index",props:{invoices:Object,filters:Object},setup(r){const C=r,c=x(C.filters.search||""),m=x(C.filters.status||""),v=x(!1),F=[{title:"All Statuses",value:""},{title:"Draft",value:"draft"},{title:"Sent",value:"sent"},{title:"Paid",value:"paid"},{title:"Overdue",value:"overdue"},{title:"Cancelled",value:"cancelled"}],D=()=>{v.value=!0,w.get(route("crm.invoices.index"),{search:c.value,status:m.value},{preserveState:!0,replace:!0,onFinish:()=>v.value=!1})},L=()=>{c.value="",m.value="",D()},T=n=>{confirm("Are you sure you want to delete this invoice?")&&w.delete(route("crm.invoices.destroy",n))},U=n=>{switch(n){case"draft":return"grey";case"sent":return"info";case"paid":return"success";case"overdue":return"error";case"cancelled":return"warning";default:return"grey"}},B=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n);return z([c,m],Q.debounce(()=>{D()},500)),(n,l)=>(i(),d(j,null,[e(g(A),{title:"Invoices"}),e(K,null,{default:t(()=>[e(O,{fluid:""},{default:t(()=>[e(I,null,{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(S,{elevation:"0",class:"mb-6"},{default:t(()=>[e(y,{class:"d-flex align-center justify-space-between py-4"},{default:t(()=>[l[5]||(l[5]=s("div",null,[s("h1",{class:"text-h4 mb-1"},"Invoices"),s("p",{class:"text-subtitle-1 text-medium-emphasis"},"Manage your billing and invoices.")],-1)),e(V,{color:"primary","prepend-icon":"mdi-plus",to:n.route("crm.invoices.create")},{default:t(()=>[...l[4]||(l[4]=[o(" New Invoice ",-1)])]),_:1},8,["to"])]),_:1})]),_:1}),e(S,{elevation:"0"},{default:t(()=>[e(y,{class:"pa-4"},{default:t(()=>[e(I,null,{default:t(()=>[e(f,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(P,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=a=>c.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search Invoice #...",variant:"outlined",density:"comfortable","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(E,{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=a=>m.value=a),items:F,label:"Status",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",sm:"12",md:"2",class:"d-flex align-center"},{default:t(()=>[e(V,{variant:"text",color:"primary",onClick:L,block:""},{default:t(()=>[...l[6]||(l[6]=[o(" Clear ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(N),e(M,{hover:""},{default:t(()=>[l[15]||(l[15]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Invoice #"),s("th",{class:"text-left"},"Client"),s("th",{class:"text-left"},"Issue Date"),s("th",{class:"text-left"},"Due Date"),s("th",{class:"text-left"},"Amount"),s("th",{class:"text-left"},"Status"),s("th",{class:"text-right"},"Actions")])],-1)),s("tbody",null,[v.value?(i(),d("tr",ee,[s("td",te,[e($,{indeterminate:"",color:"primary"})])])):r.invoices.data.length===0?(i(),d("tr",le,[s("td",se,[e(p,{size:"64",color:"medium-emphasis",class:"mb-4"},{default:t(()=>[...l[7]||(l[7]=[o("mdi-file-document-outline",-1)])]),_:1}),l[8]||(l[8]=s("p",{class:"text-h6 text-medium-emphasis"},"No invoices found.",-1))])])):b("",!0),(i(!0),d(j,null,R(r.invoices.data,a=>(i(),d("tr",{key:a.id},[s("td",ae,[e(g(q),{href:n.route("crm.invoices.show",a.id),class:"text-subtitle-1 font-weight-bold text-decoration-none text-primary"},{default:t(()=>[o(u(a.invoice_number),1)]),_:2},1032,["href"])]),s("td",null,[s("div",ne,[s("span",oe,u(a.client.name),1),a.project?(i(),d("span",re,u(a.project.name),1)):b("",!0)])]),s("td",null,u(new Date(a.issue_date).toLocaleDateString()),1),s("td",null,[s("span",{class:W({"text-error":a.status!=="paid"&&new Date(a.due_date)<new Date})},u(new Date(a.due_date).toLocaleDateString()),3)]),s("td",ie,u(B(a.total_amount)),1),s("td",null,[e(X,{color:U(a.status),size:"x-small",label:"",class:"text-uppercase font-weight-bold"},{default:t(()=>[o(u(a.status),1)]),_:2},1032,["color"])]),s("td",ue,[e(Y,null,{activator:t(({props:k})=>[e(V,G({icon:"mdi-pencil",size:"small"},{ref_for:!0},k),null,16)]),default:t(()=>[e(Z,null,{default:t(()=>[e(h,{to:n.route("crm.invoices.show",a.id)},{prepend:t(()=>[e(p,null,{default:t(()=>[...l[9]||(l[9]=[o("mdi-eye",-1)])]),_:1})]),default:t(()=>[e(_,null,{default:t(()=>[...l[10]||(l[10]=[o("View Details",-1)])]),_:1})]),_:1},8,["to"]),e(h,{to:n.route("crm.invoices.edit",a.id)},{prepend:t(()=>[e(p,null,{default:t(()=>[...l[11]||(l[11]=[o("mdi-pencil",-1)])]),_:1})]),default:t(()=>[e(_,null,{default:t(()=>[...l[12]||(l[12]=[o("Edit Invoice",-1)])]),_:1})]),_:1},8,["to"]),e(h,{onClick:k=>T(a.id)},{prepend:t(()=>[e(p,null,{default:t(()=>[...l[13]||(l[13]=[o("mdi-delete",-1)])]),_:1})]),default:t(()=>[e(_,null,{default:t(()=>[...l[14]||(l[14]=[o("Delete Invoice",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128))])]),_:1}),e(N),r.invoices.links.length>3?(i(),H(y,{key:0,class:"pa-4 d-flex justify-center"},{default:t(()=>[e(J,{modelValue:r.invoices.current_page,"onUpdate:modelValue":[l[2]||(l[2]=a=>r.invoices.current_page=a),l[3]||(l[3]=a=>g(w).get(n.route("crm.invoices.index",{page:a})))],length:r.invoices.last_page,"total-visible":"7",rounded:"circle"},null,8,["modelValue","length"])]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{xe as default};
