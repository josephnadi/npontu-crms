import{r as V,E as T,a7 as f,o,N as p,b as e,v as r,U as z,a as t,l as w,n as g,h as s,O as x,j as k,f as d,p as B,q as E,g as F,a0 as L,c as _,ah as P,P as N,a4 as $,T as A,X as D,S as u,Z as I,a6 as U,s as O,t as b,$ as y,x as S,a8 as M,a9 as q}from"./app-CajJQkEm.js";import{_ as R}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CUimra8q.js";import{l as X}from"./lodash-Dt38h8Cc.js";import"./LoaderWrapper-CM7phn5N.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-CbPhcYUv.js";const Z={class:"text-caption text-medium-emphasis"},G={key:1,class:"text-medium-emphasis"},H={class:"text-right"},J={key:0},K={class:"pa-4 d-flex justify-center"},le={__name:"Index",props:{contacts:Object,filters:Object,clients:Array},setup(i){const C=i,m=V(C.filters.search||""),c=V(C.filters.client_id||""),v=V(!1);T([m,c],X.debounce(()=>{v.value=!0,f.get(route("crm.contacts.index"),{search:m.value,client_id:c.value},{preserveState:!0,replace:!0,onFinish:()=>v.value=!1})},300));const j=n=>{confirm("Are you sure you want to delete this contact?")&&f.delete(route("crm.contacts.destroy",n))};return(n,a)=>(o(),p(A,null,[e(r(z),{title:"Contacts"}),e(R,null,{default:t(()=>[e(w,null,{default:t(()=>[e(g,{cols:"12",class:"d-flex justify-space-between align-center mb-4"},{default:t(()=>[a[5]||(a[5]=s("div",null,[s("h2",{class:"text-h3 font-weight-bold"},"Contacts"),s("p",{class:"text-subtitle-1 text-medium-emphasis"},"Manage your customer relationships")],-1)),e(r(x),{href:n.route("crm.contacts.create")},{default:t(()=>[e(k,{color:"primary","prepend-icon":"mdi-plus"},{default:t(()=>[...a[4]||(a[4]=[d("Add Contact",-1)])]),_:1})]),_:1},8,["href"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(B,{elevation:"0",border:""},{default:t(()=>[e(E,{class:"pa-4"},{default:t(()=>[e(w,null,{default:t(()=>[e(g,{cols:"12",md:"4"},{default:t(()=>[e(F,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=l=>m.value=l),"prepend-inner-icon":"mdi-magnify",label:"Search contacts...",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),e(g,{cols:"12",md:"3"},{default:t(()=>[e(L,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=l=>c.value=l),items:i.clients,"item-title":"name","item-value":"id",label:"Filter by Client",variant:"outlined",density:"comfortable","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),v.value?(o(),_(P,{key:0,indeterminate:"",color:"primary",height:"2"})):N("",!0),e($,null,{default:t(()=>[a[10]||(a[10]=s("thead",null,[s("tr",null,[s("th",{class:"text-left font-weight-bold"},"Contact Name"),s("th",{class:"text-left font-weight-bold"},"Client / Company"),s("th",{class:"text-left font-weight-bold"},"Email"),s("th",{class:"text-left font-weight-bold"},"Phone"),s("th",{class:"text-left font-weight-bold"},"Status"),s("th",{class:"text-right font-weight-bold"},"Actions")])],-1)),s("tbody",null,[(o(!0),p(A,null,D(i.contacts.data,l=>(o(),p("tr",{key:l.id},[s("td",null,[e(r(x),{href:n.route("crm.contacts.show",l.id),class:"text-decoration-none font-weight-bold text-primary"},{default:t(()=>[d(u(l.first_name)+" "+u(l.last_name),1)]),_:2},1032,["href"]),s("div",Z,u(l.job_title||"N/A"),1)]),s("td",null,[l.client?(o(),_(r(x),{key:0,href:n.route("crm.clients.show",l.client.id),class:"text-decoration-none"},{default:t(()=>[d(u(l.client.name),1)]),_:2},1032,["href"])):(o(),p("span",G,"N/A"))]),s("td",null,u(l.email||"N/A"),1),s("td",null,u(l.phone||"N/A"),1),s("td",null,[e(I,{color:l.status==="active"?"success":"grey",size:"x-small",variant:"flat",class:"text-capitalize"},{default:t(()=>[d(u(l.status),1)]),_:2},1032,["color"])]),s("td",H,[e(U,null,{activator:t(({props:h})=>[e(k,M({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},h),null,16)]),default:t(()=>[e(O,{size:"small"},{default:t(()=>[e(b,{onClick:h=>r(f).get(n.route("crm.contacts.show",l.id)),"prepend-icon":"mdi-eye"},{default:t(()=>[e(y,null,{default:t(()=>[...a[6]||(a[6]=[d("View Details",-1)])]),_:1})]),_:1},8,["onClick"]),e(b,{onClick:h=>r(f).get(n.route("crm.contacts.edit",l.id)),"prepend-icon":"mdi-pencil"},{default:t(()=>[e(y,null,{default:t(()=>[...a[7]||(a[7]=[d("Edit",-1)])]),_:1})]),_:1},8,["onClick"]),e(S),e(b,{onClick:h=>j(l.id),"prepend-icon":"mdi-delete",color:"error"},{default:t(()=>[e(y,null,{default:t(()=>[...a[8]||(a[8]=[d("Delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128)),i.contacts.data.length===0?(o(),p("tr",J,[...a[9]||(a[9]=[s("td",{colspan:"6",class:"text-center py-8 text-medium-emphasis"},' No contacts found. Click "Add Contact" to get started. ',-1)])])):N("",!0)])]),_:1}),e(S),s("div",K,[e(q,{modelValue:i.contacts.current_page,"onUpdate:modelValue":[a[2]||(a[2]=l=>i.contacts.current_page=l),a[3]||(a[3]=l=>r(f).get(n.route("crm.contacts.index"),{page:l,search:m.value,client_id:c.value},{preserveState:!0}))],length:i.contacts.last_page,size:"small"},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{le as default};
