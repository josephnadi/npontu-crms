import{r as b,D as R,o,M as i,b as e,u as f,T as $,a as t,k as C,m as g,h as s,N as k,i as A,f as r,n as B,p as E,g as M,$ as T,v as S,a4 as O,S as z,W as q,R as u,Y as P,a2 as W,aj as Y,q as Z,s as y,Z as x,U as m,a7 as G,O as H,a9 as J,a8 as V}from"./app-CqcLQhWc.js";import{_ as K}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-SEMuvBU0.js";import{l as Q}from"./lodash-CdjocJhF.js";import"./LoaderWrapper-CNYIpUw8.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-BnGuLdGC.js";import"./useApi-o-nPpLEi-7nyp_4n4.js";const X={key:0},ee={key:1},te={key:0,class:"d-flex align-center"},le={class:"text-caption text-white"},ae={class:"text-body-2"},se={key:1,class:"text-medium-emphasis text-body-2"},re={class:"text-right"},ne={key:0},oe={class:"pa-4 d-flex justify-center"},ce={__name:"Index",props:{partners:Object,filters:Object},setup(d){const w=d,p=b(w.filters?.search||""),c=b(w.filters?.type||""),v=b(w.filters?.status||""),_=b(!1),N=[{title:"All Types",value:""},{title:"Reseller",value:"reseller"},{title:"Affiliate",value:"affiliate"},{title:"Referral",value:"referral"},{title:"Technology",value:"technology"}],F=[{title:"All Statuses",value:""},{title:"Active",value:"active"},{title:"Inactive",value:"inactive"},{title:"Pending",value:"pending"},{title:"Terminated",value:"terminated"}],L=()=>{_.value=!0,V.get(route("crm.partners.index"),{search:p.value,type:c.value,status:v.value},{preserveState:!0,replace:!0,preserveScroll:!0,onFinish:()=>_.value=!1})};R([p,c,v],Q.debounce(()=>{L()},500));const U=n=>{confirm("Are you sure you want to delete this partner?")&&V.delete(route("crm.partners.destroy",n))},j=n=>{confirm("Are you sure you want to convert this partner back to a lead?")&&V.post(route("crm.partners.convert-to-lead",n))},D=n=>{confirm("Are you sure you want to create a support ticket from this partner?")&&V.post(route("crm.partners.convert-to-ticket",n))},I=n=>{switch(n){case"active":return"success";case"inactive":return"grey";case"pending":return"warning";case"terminated":return"error";default:return"grey"}};return(n,l)=>(o(),i(z,null,[e(f($),{title:"Partners"}),e(K,null,{default:t(()=>[e(C,null,{default:t(()=>[e(g,{cols:"12",class:"d-flex justify-space-between align-center mb-4"},{default:t(()=>[l[6]||(l[6]=s("div",null,[s("h2",{class:"text-h3 font-weight-bold"},"Partners"),s("p",{class:"text-subtitle-1 text-medium-emphasis"},"Manage your business partnerships and referral network")],-1)),e(f(k),{href:n.route("crm.partners.create")},{default:t(()=>[e(A,{color:"primary","prepend-icon":"mdi-plus"},{default:t(()=>[...l[5]||(l[5]=[r("Add Partner",-1)])]),_:1})]),_:1},8,["href"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(B,{elevation:"0",border:""},{default:t(()=>[e(E,{class:"pa-4"},{default:t(()=>[e(C,null,{default:t(()=>[e(g,{cols:"12",md:"4"},{default:t(()=>[e(M,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=a=>p.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search partners...",variant:"outlined",density:"comfortable","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),e(g,{cols:"12",md:"3"},{default:t(()=>[e(T,{modelValue:c.value,"onUpdate:modelValue":l[1]||(l[1]=a=>c.value=a),items:N,label:"Type",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),e(g,{cols:"12",md:"3"},{default:t(()=>[e(T,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=a=>v.value=a),items:F,label:"Status",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(S),e(O,{hover:""},{default:t(()=>[l[19]||(l[19]=s("thead",null,[s("tr",null,[s("th",{class:"text-left font-weight-bold"},"Name"),s("th",{class:"text-left font-weight-bold"},"Type"),s("th",{class:"text-left font-weight-bold"},"Status"),s("th",{class:"text-left font-weight-bold"},"Email"),s("th",{class:"text-left font-weight-bold"},"Comm. Rate"),s("th",{class:"text-left font-weight-bold"},"Account Manager"),s("th",{class:"text-right font-weight-bold"},"Actions")])],-1)),s("tbody",null,[(o(!0),i(z,null,q(d.partners.data,a=>(o(),i("tr",{key:a.id},[s("td",null,[e(f(k),{href:n.route("crm.partners.show",a.id),class:"text-decoration-none font-weight-bold text-primary"},{default:t(()=>[r(u(a.name),1)]),_:2},1032,["href"])]),s("td",null,[e(P,{size:"x-small",variant:"tonal",class:"text-uppercase"},{default:t(()=>[r(u(a.type),1)]),_:2},1024)]),s("td",null,[e(P,{color:I(a.status),size:"x-small",label:"",class:"text-uppercase font-weight-bold"},{default:t(()=>[r(u(a.status),1)]),_:2},1032,["color"])]),s("td",null,u(a.email||"N/A"),1),s("td",null,[a.commission_rate?(o(),i("span",X,u(a.commission_rate)+"%",1)):(o(),i("span",ee,"N/A"))]),s("td",null,[a.account_manager?(o(),i("div",te,[e(W,{size:"24",class:"mr-2",color:"primary"},{default:t(()=>[s("span",le,u(a.account_manager.name.charAt(0)),1)]),_:2},1024),s("span",ae,u(a.account_manager.name),1)])):(o(),i("span",se,"Unassigned"))]),s("td",re,[e(Y,null,{activator:t(({props:h})=>[e(A,G({color:"primary",icon:"",flat:"",size:"small"},{ref_for:!0},h),{default:t(()=>[e(m,null,{default:t(()=>[...l[7]||(l[7]=[r("mdi-pencil",-1)])]),_:1})]),_:1},16)]),default:t(()=>[e(Z,null,{default:t(()=>[e(f(k),{href:n.route("crm.partners.show",a.id),class:"text-decoration-none"},{default:t(()=>[e(y,null,{prepend:t(()=>[e(m,{size:"small"},{default:t(()=>[...l[8]||(l[8]=[r("mdi-eye",-1)])]),_:1})]),default:t(()=>[e(x,null,{default:t(()=>[...l[9]||(l[9]=[r("View Details",-1)])]),_:1})]),_:1})]),_:1},8,["href"]),e(f(k),{href:n.route("crm.partners.edit",a.id),class:"text-decoration-none"},{default:t(()=>[e(y,null,{prepend:t(()=>[e(m,{size:"small"},{default:t(()=>[...l[10]||(l[10]=[r("mdi-pencil",-1)])]),_:1})]),default:t(()=>[e(x,null,{default:t(()=>[...l[11]||(l[11]=[r("Edit Partner",-1)])]),_:1})]),_:1})]),_:1},8,["href"]),e(y,{onClick:h=>j(a.id)},{prepend:t(()=>[e(m,{size:"small"},{default:t(()=>[...l[12]||(l[12]=[r("mdi-account-convert-outline",-1)])]),_:1})]),default:t(()=>[e(x,null,{default:t(()=>[...l[13]||(l[13]=[r("Convert to Lead",-1)])]),_:1})]),_:1},8,["onClick"]),e(y,{onClick:h=>D(a.id)},{prepend:t(()=>[e(m,{size:"small"},{default:t(()=>[...l[14]||(l[14]=[r("mdi-ticket-outline",-1)])]),_:1})]),default:t(()=>[e(x,null,{default:t(()=>[...l[15]||(l[15]=[r("Convert to Ticket",-1)])]),_:1})]),_:1},8,["onClick"]),e(y,{onClick:h=>U(a.id)},{prepend:t(()=>[e(m,{size:"small"},{default:t(()=>[...l[16]||(l[16]=[r("mdi-delete",-1)])]),_:1})]),default:t(()=>[e(x,null,{default:t(()=>[...l[17]||(l[17]=[r("Delete Partner",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128)),d.partners.data.length===0?(o(),i("tr",ne,[...l[18]||(l[18]=[s("td",{colspan:"7",class:"text-center py-8 text-medium-emphasis"},' No partners found. Click "Add Partner" to get started. ',-1)])])):H("",!0)])]),_:1}),e(S),s("div",oe,[e(J,{modelValue:d.partners.current_page,"onUpdate:modelValue":[l[3]||(l[3]=a=>d.partners.current_page=a),l[4]||(l[4]=a=>f(V).get(n.route("crm.partners.index"),{page:a,search:p.value,type:c.value,status:v.value},{preserveState:!0}))],length:d.partners.last_page,size:"small"},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{ce as default};
