import{r as p,D as A,o as f,M as y,b as e,u as _,T as O,a,k as w,m as d,h as s,U as v,f as i,n as E,p as k,g as M,$ as C,i as I,q as R,S,W,c as x,s as T,Z as U,R as n,ak as F,Y as j,a2 as Y,a9 as $,a8 as z,O as q}from"./app-CqcLQhWc.js";import{_ as H}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-SEMuvBU0.js";import{l as P}from"./lodash-CdjocJhF.js";import{_ as Z}from"./LoaderWrapper-CNYIpUw8.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-BnGuLdGC.js";import"./useApi-o-nPpLEi-7nyp_4n4.js";const G={class:"d-flex align-center text-caption text-medium-emphasis mb-2"},J={class:"text-h6 font-weight-bold"},K={class:"text-caption text-medium-emphasis"},Q={class:"d-flex align-center gap-2 mb-1"},X={class:"text-caption font-weight-bold text-high-emphasis"},ee={class:"text-body-2 text-truncate-2"},te={class:"d-flex flex-column align-end"},ae={__name:"Index",props:{communications:Object,filters:Object},setup(o){const b=o,u=p(b.filters.search||""),c=p(b.filters.type||""),m=p(b.filters.direction||""),g=p(!1),L=[{title:"All Types",value:""},{title:"Email",value:"email"},{title:"SMS",value:"sms"},{title:"WhatsApp",value:"whatsapp"},{title:"Call",value:"call"}],N=[{title:"All Directions",value:""},{title:"Inbound",value:"inbound"},{title:"Outbound",value:"outbound"}],h=()=>{g.value=!0,z.get(route("crm.communications.index"),{search:u.value,type:c.value,direction:m.value},{preserveState:!0,replace:!0,onFinish:()=>g.value=!1})},B=()=>{u.value="",c.value="",m.value="",h()},D=r=>{switch(r){case"email":return"mdi-email-outline";case"sms":return"mdi-message-text-outline";case"whatsapp":return"mdi-whatsapp";case"call":return"mdi-phone-outline";default:return"mdi-information-outline"}},V=r=>{switch(r){case"email":return"primary";case"sms":return"info";case"whatsapp":return"success";case"call":return"warning";default:return"grey"}};return A([u,c,m],P.debounce(()=>{h()},500)),(r,t)=>(f(),y(S,null,[e(_(O),{title:"Unified Inbox"}),e(H,null,{default:a(()=>[e(w,null,{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[s("div",G,[t[7]||(t[7]=s("span",null,"Home",-1)),e(v,{size:"14",class:"mx-1"},{default:a(()=>[...t[5]||(t[5]=[i("mdi-chevron-right",-1)])]),_:1}),t[8]||(t[8]=s("span",null,"CRM",-1)),e(v,{size:"14",class:"mx-1"},{default:a(()=>[...t[6]||(t[6]=[i("mdi-chevron-right",-1)])]),_:1}),t[9]||(t[9]=s("span",{class:"text-high-emphasis"},"Unified Inbox",-1))]),t[10]||(t[10]=s("h2",{class:"text-h3 font-weight-bold mb-6"},"Unified Inbox",-1))]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(E,{elevation:"0",border:""},{default:a(()=>[e(k,{class:"pa-4 border-bottom"},{default:a(()=>[e(w,{align:"center"},{default:a(()=>[e(d,{cols:"12",md:"4"},{default:a(()=>[e(M,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),label:"Search interactions...",variant:"outlined",density:"comfortable","hide-details":"","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"3"},{default:a(()=>[e(C,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=l=>c.value=l),items:L,label:"Type",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"3"},{default:a(()=>[e(C,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=l=>m.value=l),items:N,label:"Direction",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"2"},{default:a(()=>[e(I,{variant:"outlined",block:"",onClick:B},{default:a(()=>[...t[11]||(t[11]=[i("Clear",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{class:"pa-0 inbox-list",lines:"three"},{default:a(()=>[o.communications.data.length>0?(f(!0),y(S,{key:0},W(o.communications.data,(l,le)=>(f(),x(T,{key:l.id,class:"pa-4 border-bottom hover-bg"},{prepend:a(()=>[e(Y,{color:V(l.type)+"-lighten-5",size:"48"},{default:a(()=>[e(v,{color:V(l.type)},{default:a(()=>[i(n(D(l.type)),1)]),_:2},1032,["color"])]),_:2},1032,["color"])]),append:a(()=>[s("div",te,[e(j,{size:"x-small",color:"grey-lighten-2",variant:"flat",class:"mb-2"},{default:a(()=>[i(n(l.status),1)]),_:2},1024),e(I,{icon:"mdi-eye-outline",variant:"text",size:"small",href:r.route("crm.communications.show",l.id)},null,8,["href"])])]),default:a(()=>[e(U,{class:"d-flex justify-space-between align-center mb-1"},{default:a(()=>[s("span",J,n(l.subject||"(No Subject)"),1),s("span",K,n(new Date(l.created_at).toLocaleString()),1)]),_:2},1024),e(F,{class:"mb-2"},{default:a(()=>[s("div",Q,[e(j,{size:"x-small",color:l.direction==="inbound"?"info":"secondary",variant:"tonal"},{default:a(()=>[i(n(l.direction.toUpperCase()),1)]),_:2},1032,["color"]),s("span",X,n(l.direction==="inbound"?"From: ":"To: ")+" "+n(l.direction==="inbound"?l.from_identifier:l.to_identifier),1)]),s("div",ee,n(l.content),1)]),_:2},1024)]),_:2},1024))),128)):(f(),x(T,{key:1,class:"pa-10 text-center"},{default:a(()=>[e(U,{class:"text-h6 text-medium-emphasis"},{default:a(()=>[...t[12]||(t[12]=[i("No interactions found",-1)])]),_:1}),e(F,null,{default:a(()=>[...t[13]||(t[13]=[i("Your omnichannel communications will appear here",-1)])]),_:1})]),_:1}))]),_:1}),o.communications.links.length>3?(f(),x(k,{key:0,class:"pa-4 d-flex justify-center"},{default:a(()=>[e($,{modelValue:o.communications.current_page,"onUpdate:modelValue":[t[3]||(t[3]=l=>o.communications.current_page=l),t[4]||(t[4]=l=>_(z).get(r.route("crm.communications.index",{page:l})))],length:o.communications.last_page,"total-visible":"7",rounded:"circle"},null,8,["modelValue","length"])]),_:1})):q("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64))}},ue=Z(ae,[["__scopeId","data-v-a794cd83"]]);export{ue as default};
