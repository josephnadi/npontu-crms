import{M as A,o as x,N as C,b as e,v as t,U as M,a as i,l as p,n as o,h as n,O as c,j as u,_ as w,p as S,w as T,a0 as m,g as v,a1 as j,a2 as k,f as y,T as U,G as q}from"./app-CajJQkEm.js";import{_ as D}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CUimra8q.js";import"./LoaderWrapper-CM7phn5N.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-CbPhcYUv.js";const $={class:"mb-6 d-flex align-center"},L={__name:"Create",props:{deals:{type:Array,required:!0},leads:{type:Array,default:()=>[]},contacts:{type:Array,default:()=>[]},clients:{type:Array,default:()=>[]}},setup(f){const d=f,a=A({type:"call",subject:"",description:"",activity_date:new Date().toISOString().slice(0,16),due_date:"",status:"pending",activityable_type:"App\\Models\\Deal",activityable_id:null}),b=[{title:"Deal",value:"App\\Models\\Deal"},{title:"Lead",value:"App\\Models\\Lead"},{title:"Contact",value:"App\\Models\\Contact"},{title:"Client",value:"App\\Models\\Client"}],V=[{title:"Call",value:"call"},{title:"Meeting",value:"meeting"},{title:"Email",value:"email"},{title:"Task",value:"task"},{title:"Note",value:"note"}],g=q(()=>{switch(a.activityable_type){case"App\\Models\\Deal":return d.deals.map(s=>({title:s.title,value:s.id}));case"App\\Models\\Lead":return d.leads.map(s=>({title:`${s.first_name} ${s.last_name}`,value:s.id}));case"App\\Models\\Contact":return d.contacts.map(s=>({title:`${s.first_name} ${s.last_name}`,value:s.id}));case"App\\Models\\Client":return d.clients.map(s=>({title:s.name,value:s.id}));default:return[]}}),_=()=>{a.post(window.route("crm.activities.store"),{onSuccess:()=>{}})};return(s,l)=>(x(),C(U,null,[e(t(M),{title:"Schedule Activity"}),e(D,null,{default:i(()=>[e(p,{justify:"center"},{default:i(()=>[e(o,{cols:"12",md:"8",lg:"6"},{default:i(()=>[n("div",$,[e(t(c),{href:s.route("crm.activities.index"),class:"mr-4"},{default:i(()=>[e(u,{icon:"",variant:"text"},{default:i(()=>[e(w,{name:"custom-chevron-left",style:{width:"20px",height:"20px"}})]),_:1})]),_:1},8,["href"]),l[8]||(l[8]=n("h2",{class:"text-h4 font-weight-bold"},"Schedule Activity",-1))]),e(S,{class:"pa-6"},{default:i(()=>[n("form",{onSubmit:T(_,["prevent"])},[e(p,null,{default:i(()=>[e(o,{cols:"12",md:"6"},{default:i(()=>[e(m,{modelValue:t(a).type,"onUpdate:modelValue":l[0]||(l[0]=r=>t(a).type=r),items:V,label:"Activity Type",required:"","error-messages":t(a).errors.type,variant:"outlined","prepend-inner-icon":"mdi-format-list-bulleted-type"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",md:"6"},{default:i(()=>[e(v,{modelValue:t(a).activity_date,"onUpdate:modelValue":l[1]||(l[1]=r=>t(a).activity_date=r),label:"Date & Time",type:"datetime-local",required:"","error-messages":t(a).errors.activity_date,variant:"outlined","prepend-inner-icon":"mdi-calendar-clock"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",md:"6"},{default:i(()=>[e(m,{modelValue:t(a).activityable_type,"onUpdate:modelValue":[l[2]||(l[2]=r=>t(a).activityable_type=r),l[3]||(l[3]=r=>t(a).activityable_id=null)],items:b,label:"Relate To",required:"","error-messages":t(a).errors.activityable_type,variant:"outlined","prepend-inner-icon":"mdi-link-variant"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",md:"6"},{default:i(()=>[e(j,{modelValue:t(a).activityable_id,"onUpdate:modelValue":l[4]||(l[4]=r=>t(a).activityable_id=r),items:g.value,label:"Select Entity",required:"","error-messages":t(a).errors.activityable_id,variant:"outlined","prepend-inner-icon":"mdi-magnify",disabled:!t(a).activityable_type},null,8,["modelValue","items","error-messages","disabled"])]),_:1}),e(o,{cols:"12"},{default:i(()=>[e(v,{modelValue:t(a).subject,"onUpdate:modelValue":l[5]||(l[5]=r=>t(a).subject=r),label:"Subject",required:"","error-messages":t(a).errors.subject,variant:"outlined","prepend-inner-icon":"mdi-text-short"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12"},{default:i(()=>[e(k,{modelValue:t(a).description,"onUpdate:modelValue":l[6]||(l[6]=r=>t(a).description=r),label:"Description / Notes",rows:"4","error-messages":t(a).errors.description,variant:"outlined","prepend-inner-icon":"mdi-note-text-outline"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",md:"6"},{default:i(()=>[e(m,{modelValue:t(a).status,"onUpdate:modelValue":l[7]||(l[7]=r=>t(a).status=r),items:["pending","completed","cancelled"],label:"Status",required:"","error-messages":t(a).errors.status,variant:"outlined","prepend-inner-icon":"mdi-check-circle-outline"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",class:"d-flex justify-end gap-2"},{default:i(()=>[e(t(c),{href:s.route("crm.activities.index"),class:"text-decoration-none mr-2"},{default:i(()=>[e(u,{variant:"outlined"},{default:i(()=>[...l[9]||(l[9]=[y("Cancel",-1)])]),_:1})]),_:1},8,["href"]),e(u,{type:"submit",color:"primary",loading:t(a).processing},{default:i(()=>[...l[10]||(l[10]=[y(" Save Activity ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})],32)]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{L as default};
