import{r as w,o as c,N as x,b as e,v as r,U as B,a as t,l as S,n as d,h as n,O as V,j as _,f as i,p as z,q as F,g as I,a3 as E,a0 as A,a4 as O,T,X as P,a5 as R,_ as q,S as o,Z as K,a6 as M,s as X,t as b,a7 as m,$ as k,c as Z,P as N,x as G,a8 as H,a9 as J}from"./app-CajJQkEm.js";import{_ as Q}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-CUimra8q.js";import"./LoaderWrapper-CM7phn5N.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-CbPhcYUv.js";const W={class:"d-flex gap-2"},Y={class:"d-flex align-center"},ee={class:"text-capitalize"},te={class:"font-weight-medium"},le={class:"text-caption text-grey text-truncate",style:{"max-width":"300px"}},ae={class:"text-caption text-grey mb-1"},se={class:"text-right"},ne={key:0},re={class:"pa-4 d-flex justify-center"},ce={__name:"Index",props:{activities:{type:Object,required:!0},filters:Object},setup(u){const h=u,p=w(h.filters?.search||""),f=w(h.filters?.type||"all"),g=w(h.filters?.status||"all"),y=()=>{m.get(route("crm.activities.index"),{search:p.value,type:f.value,status:g.value},{preserveState:!0,replace:!0})},j=s=>{confirm("Are you sure you want to delete this activity?")&&m.delete(window.route("crm.activities.destroy",s))},L=s=>{switch(s){case"call":return"custom-phone";case"meeting":return"custom-users";case"email":return"custom-mail";case"task":return"custom-check";case"note":return"custom-file-text";default:return"custom-calendar"}},D=s=>{switch(s){case"call":return"info";case"meeting":return"primary";case"email":return"warning";case"task":return"success";case"note":return"secondary";default:return"grey"}},U=s=>s?new Date(s).toLocaleString():"N/A",C=s=>{if(!s.activityable)return"#";switch(s.activityable_type.split("\\").pop().toLowerCase()){case"deal":return window.route("crm.deals.show",s.activityable_id);case"lead":return window.route("crm.leads.show",s.activityable_id);case"contact":return window.route("crm.contacts.show",s.activityable_id);case"client":return window.route("crm.clients.show",s.activityable_id);default:return"#"}},$=s=>s.activityable?s.activityable.title||s.activityable.name||"View":"Unknown";return(s,a)=>(c(),x(T,null,[e(r(B),{title:"Activities"}),e(Q,null,{default:t(()=>[e(S,null,{default:t(()=>[e(d,{cols:"12",class:"d-flex justify-space-between align-center"},{default:t(()=>[a[7]||(a[7]=n("h2",{class:"text-h4 font-weight-bold"},"Activities",-1)),n("div",W,[e(r(V),{href:s.route("crm.activities.calendar"),class:"text-decoration-none mr-2"},{default:t(()=>[e(_,{variant:"outlined","prepend-icon":"mdi-calendar"},{default:t(()=>[...a[5]||(a[5]=[i("Calendar View",-1)])]),_:1})]),_:1},8,["href"]),e(r(V),{href:s.route("crm.activities.create"),class:"text-decoration-none"},{default:t(()=>[e(_,{color:"primary","prepend-icon":"mdi-plus"},{default:t(()=>[...a[6]||(a[6]=[i("Add Activity",-1)])]),_:1})]),_:1},8,["href"])])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(z,{class:"mb-4"},{default:t(()=>[e(F,null,{default:t(()=>[e(S,{align:"center"},{default:t(()=>[e(d,{cols:"12",md:"4"},{default:t(()=>[e(I,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=l=>p.value=l),label:"Search activities...","prepend-inner-icon":"mdi-magnify","hide-details":"",variant:"outlined",density:"comfortable",onKeyup:E(y,["enter"])},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"3"},{default:t(()=>[e(A,{modelValue:f.value,"onUpdate:modelValue":[a[1]||(a[1]=l=>f.value=l),y],items:["all","call","meeting","email","task","note"],label:"Type","hide-details":"",variant:"outlined",density:"comfortable",class:"text-capitalize"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"3"},{default:t(()=>[e(A,{modelValue:g.value,"onUpdate:modelValue":[a[2]||(a[2]=l=>g.value=l),y],items:["all","pending","completed","cancelled"],label:"Status","hide-details":"",variant:"outlined",density:"comfortable",class:"text-capitalize"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(O,null,{default:t(()=>[a[12]||(a[12]=n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"Type"),n("th",{class:"text-left"},"Subject"),n("th",{class:"text-left"},"Related To"),n("th",{class:"text-left"},"Date"),n("th",{class:"text-left"},"Status"),n("th",{class:"text-right"},"Actions")])],-1)),n("tbody",null,[(c(!0),x(T,null,P(u.activities.data,l=>(c(),x("tr",{key:l.id},[n("td",null,[n("div",Y,[e(R,{color:D(l.type),size:"32",class:"mr-3"},{default:t(()=>[e(q,{name:L(l.type),style:{width:"16px",height:"16px",color:"white"}},null,8,["name"])]),_:2},1032,["color"]),n("span",ee,o(l.type),1)])]),n("td",null,[n("div",te,o(l.subject),1),n("div",le,o(l.description),1)]),n("td",null,[n("div",ae,o(l.activityable_type.split("\\").pop()),1),e(r(V),{href:C(l),class:"text-primary text-decoration-none font-weight-medium"},{default:t(()=>[i(o($(l)),1)]),_:2},1032,["href"])]),n("td",null,o(U(l.activity_date)),1),n("td",null,[e(K,{color:l.status==="completed"?"success":l.status==="pending"?"warning":"error",size:"x-small",variant:"tonal",class:"text-capitalize"},{default:t(()=>[i(o(l.status),1)]),_:2},1032,["color"])]),n("td",se,[e(M,null,{activator:t(({props:v})=>[e(_,H({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},v),null,16)]),default:t(()=>[e(X,{size:"small"},{default:t(()=>[e(b,{onClick:v=>r(m).get(C(l)),"prepend-icon":"mdi-eye"},{default:t(()=>[e(k,null,{default:t(()=>[...a[8]||(a[8]=[i("View Related",-1)])]),_:1})]),_:1},8,["onClick"]),l.status==="pending"?(c(),Z(b,{key:0,onClick:v=>r(m).put(s.route("crm.activities.update",l.id),{...l,status:"completed"}),"prepend-icon":"mdi-check",color:"success"},{default:t(()=>[e(k,null,{default:t(()=>[...a[9]||(a[9]=[i("Mark Completed",-1)])]),_:1})]),_:1},8,["onClick"])):N("",!0),e(G),e(b,{onClick:v=>j(l.id),"prepend-icon":"mdi-delete",color:"error"},{default:t(()=>[e(k,null,{default:t(()=>[...a[10]||(a[10]=[i("Delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128)),u.activities.data.length===0?(c(),x("tr",ne,[...a[11]||(a[11]=[n("td",{colspan:"6",class:"text-center py-8 text-grey"}," No activities found matching your criteria. ",-1)])])):N("",!0)])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[n("div",re,[e(J,{modelValue:u.activities.current_page,"onUpdate:modelValue":[a[3]||(a[3]=l=>u.activities.current_page=l),a[4]||(a[4]=l=>r(m).get(s.route("crm.activities.index"),{page:l,search:p.value,type:f.value,status:g.value},{preserveState:!0}))],length:u.activities.last_page,size:"small","active-color":"primary"},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1})],64))}};export{ce as default};
