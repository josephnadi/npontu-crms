import{B as $,a8 as L,ap as q,j as G,o as m,M as y,b as t,u,T as W,a as e,k as X,m as c,h as i,N as p,i as h,f as r,n as f,a2 as g,U as d,R as o,ae as x,q as w,S as C,W as D,c as _,s as v,Y as P,v as I,ac as T,X as Y,am as Z,p as B,Z as z,ak as J,aj as K,O,a7 as Q,_ as ee,F as k}from"./app-CqcLQhWc.js";import{_ as te}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-SEMuvBU0.js";import{_ as ae}from"./LoaderWrapper-CNYIpUw8.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-BnGuLdGC.js";import"./useApi-o-nPpLEi-7nyp_4n4.js";const se={class:"d-flex gap-2"},le={class:"d-flex align-center mb-2"},ie={class:"text-h4 font-weight-bold counter-value text-high-emphasis"},re={class:"text-caption text-success mt-1"},oe={class:"d-flex align-center mb-2"},ne={class:"text-h4 font-weight-bold counter-value text-high-emphasis"},de={class:"text-caption text-success mt-1"},ue={class:"d-flex align-center mb-2"},ce={class:"text-h4 font-weight-bold counter-value text-high-emphasis"},me={class:"d-flex align-center mb-2"},fe={class:"text-h4 font-weight-bold counter-value text-high-emphasis"},pe={class:"text-caption text-error mt-1"},he={class:"text-success"},ge={class:"text-primary font-weight-bold"},ve={class:"text-right"},xe={class:"d-flex align-center"},_e={class:"text-right mr-3"},be={class:"text-caption font-weight-medium"},ye={__name:"Index",props:{metrics:Object,pipelineData:Array,activityBreakdown:Array,recentActivities:Array,highPotentialLeads:Array,criticalTasks:Array},setup(n){const b=n;let A;$(()=>{A=setInterval(()=>{L.reload({only:["metrics","pipelineData","activityBreakdown","recentActivities","highPotentialLeads","criticalTasks"],preserveScroll:!0})},3e4)}),q(()=>{A&&clearInterval(A)});const M=s=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(s),N=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),j=k(()=>({chart:{type:"bar",height:350,toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,horizontal:!0,distributed:!0,barHeight:"80%"}},colors:["#4680ff","#2ca87f","#e58a00","#dc2626","#673ab7","#3ec9d6"],dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},formatter:function(s,a){return a.w.globals.labels[a.dataPointIndex]+": "+s},offsetX:0},xaxis:{categories:b.pipelineData.map(s=>s.name)},yaxis:{labels:{show:!1}},grid:{borderColor:"#f1f1f1"}})),R=k(()=>[{name:"Deals",data:b.pipelineData.map(s=>s.count)}]),H=k(()=>({chart:{type:"donut",height:300},labels:b.activityBreakdown.map(s=>s.type.charAt(0).toUpperCase()+s.type.slice(1)),colors:["#4680ff","#2ca87f","#e58a00","#dc2626","#673ab7"],legend:{position:"bottom"},plotOptions:{pie:{donut:{size:"70%"}}}})),E=k(()=>b.activityBreakdown.map(s=>s.count)),F=s=>{switch(s){case"call":return"custom-phone";case"meeting":return"custom-user-fill";case"email":return"custom-mail";case"note":return"custom-file-text";default:return"custom-notification"}},U=s=>{switch(s){case"call":return"primary";case"meeting":return"success";case"email":return"warning";case"note":return"info";default:return"secondary"}};return(s,a)=>{const S=G("apexchart");return m(),y(C,null,[t(u(W),{title:"CRM Dashboard"}),t(te,null,{default:e(()=>[t(X,null,{default:e(()=>[t(c,{cols:"12",class:"d-flex justify-space-between align-center mb-4"},{default:e(()=>[a[2]||(a[2]=i("div",null,[i("h2",{class:"text-h3 font-weight-bold"},"CRM Dashboard"),i("p",{class:"text-subtitle-1 text-medium-emphasis"},"Overview of your sales and activities")],-1)),i("div",se,[t(u(p),{href:s.route("crm.deals.create")},{default:e(()=>[t(h,{color:"primary","prepend-icon":"mdi-plus"},{default:e(()=>[...a[0]||(a[0]=[r("Add Deal",-1)])]),_:1})]),_:1},8,["href"]),t(u(p),{href:s.route("crm.activities.create")},{default:e(()=>[t(h,{variant:"outlined",color:"primary","prepend-icon":"mdi-calendar-plus"},{default:e(()=>[...a[1]||(a[1]=[r("Log Activity",-1)])]),_:1})]),_:1},8,["href"])])]),_:1}),t(c,{cols:"12",sm:"6",lg:"3"},{default:e(()=>[t(u(p),{href:s.route("crm.contacts.index"),class:"text-decoration-none"},{default:e(()=>[t(f,{class:"pa-4 stat-card",elevation:"2"},{default:e(()=>[i("div",le,[t(g,{color:"blue-lighten-5",size:"40",class:"mr-3 icon-avatar"},{default:e(()=>[t(d,{color:"primary"},{default:e(()=>[...a[3]||(a[3]=[r("mdi-account-group",-1)])]),_:1})]),_:1}),a[4]||(a[4]=i("span",{class:"text-subtitle-2 font-weight-medium text-high-emphasis"},"Total Contacts",-1))]),i("div",ie,o(n.metrics.totalContacts),1),i("div",re,[t(d,{size:"small"},{default:e(()=>[...a[5]||(a[5]=[r("mdi-trending-up",-1)])]),_:1}),a[6]||(a[6]=r(" 12% from last month ",-1))])]),_:1})]),_:1},8,["href"])]),_:1}),t(c,{cols:"12",sm:"6",lg:"3"},{default:e(()=>[t(u(p),{href:s.route("crm.deals.pipeline"),class:"text-decoration-none"},{default:e(()=>[t(f,{class:"pa-4 stat-card",elevation:"2"},{default:e(()=>[i("div",oe,[t(g,{color:"green-lighten-5",size:"40",class:"mr-3 icon-avatar"},{default:e(()=>[t(d,{color:"success"},{default:e(()=>[...a[7]||(a[7]=[r("mdi-briefcase-check",-1)])]),_:1})]),_:1}),a[8]||(a[8]=i("span",{class:"text-subtitle-2 font-weight-medium text-high-emphasis"},"Open Deals",-1))]),i("div",ne,o(n.metrics.openDeals),1),i("div",de,[t(d,{size:"small"},{default:e(()=>[...a[9]||(a[9]=[r("mdi-trending-up",-1)])]),_:1}),a[10]||(a[10]=r(" 5 new this week ",-1))])]),_:1})]),_:1},8,["href"])]),_:1}),t(c,{cols:"12",sm:"6",lg:"3"},{default:e(()=>[t(u(p),{href:s.route("crm.deals.index"),class:"text-decoration-none"},{default:e(()=>[t(f,{class:"pa-4 stat-card",elevation:"2"},{default:e(()=>[i("div",ue,[t(g,{color:"orange-lighten-5",size:"40",class:"mr-3 icon-avatar"},{default:e(()=>[t(d,{color:"warning"},{default:e(()=>[...a[11]||(a[11]=[r("mdi-currency-usd",-1)])]),_:1})]),_:1}),a[12]||(a[12]=i("span",{class:"text-subtitle-2 font-weight-medium text-high-emphasis"},"Pipeline Value",-1))]),i("div",ce,o(M(n.metrics.totalValue)),1),a[13]||(a[13]=i("div",{class:"text-caption text-warning mt-1"}," Expected by end of quarter ",-1))]),_:1})]),_:1},8,["href"])]),_:1}),t(c,{cols:"12",sm:"6",lg:"3"},{default:e(()=>[t(u(p),{href:s.route("crm.activities.index"),class:"text-decoration-none"},{default:e(()=>[t(f,{class:"pa-4 stat-card",elevation:"2"},{default:e(()=>[i("div",me,[t(g,{color:"purple-lighten-5",size:"40",class:"mr-3 icon-avatar"},{default:e(()=>[t(d,{color:"secondary"},{default:e(()=>[...a[14]||(a[14]=[r("mdi-calendar-clock",-1)])]),_:1})]),_:1}),a[15]||(a[15]=i("span",{class:"text-subtitle-2 font-weight-medium text-high-emphasis"},"Pending Tasks",-1))]),i("div",fe,o(n.metrics.pendingActivities),1),i("div",pe,o(n.metrics.slaBreachesCount)+" SLA breaches ",1)]),_:1})]),_:1},8,["href"])]),_:1}),t(c,{cols:"12",md:"6"},{default:e(()=>[t(f,{elevation:"2"},{default:e(()=>[t(x,{title:"Lead Intelligence"},{subtitle:e(()=>[i("span",he,o(n.metrics.highPotentialLeadsCount)+" High Potential Leads",1)]),_:1}),t(w,{lines:"two"},{default:e(()=>[(m(!0),y(C,null,D(n.highPotentialLeads,l=>(m(),_(v,{key:l.id,title:l.first_name+" "+l.last_name,subtitle:l.company_name},{prepend:e(()=>[t(g,{color:"primary-lighten-5"},{default:e(()=>[i("span",ge,o(l.score),1)]),_:2},1024)]),append:e(()=>[t(P,{color:l.score>70?"success":"warning",size:"small"},{default:e(()=>[r(o(l.score>70?"Hot":"Warm"),1)]),_:2},1032,["color"])]),_:2},1032,["title","subtitle"]))),128))]),_:1}),t(I),t(T,null,{default:e(()=>[t(h,{variant:"text",color:"primary",block:"",href:s.route("crm.leads.index")},{default:e(()=>[...a[16]||(a[16]=[r("View All Leads",-1)])]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}),t(c,{cols:"12",md:"6"},{default:e(()=>[t(f,{elevation:"2"},{default:e(()=>[t(x,{title:"Task Intelligence"},{subtitle:e(()=>[...a[17]||(a[17]=[i("span",{class:"text-error"},"Priority & SLA Tracking",-1)])]),_:1}),t(w,{lines:"two"},{default:e(()=>[(m(!0),y(C,null,D(n.criticalTasks,l=>(m(),_(v,{key:l.id,title:l.title,subtitle:"Priority Score: "+l.priority_score},{prepend:e(()=>[t(d,{color:l.priority==="high"?"error":"warning"},{default:e(()=>[r(o(l.priority==="high"?"mdi-alert-circle":"mdi-alert"),1)]),_:2},1032,["color"])]),append:e(()=>[i("div",ve,[i("div",{class:Y(["text-caption font-weight-bold",l.escalated_at?"text-error":""])},o(l.escalated_at?"ESCALATED":"In SLA"),3),t(Z,{"model-value":l.priority_score,color:l.priority_score>70?"error":"warning",height:"4",rounded:""},null,8,["model-value","color"])])]),_:2},1032,["title","subtitle"]))),128))]),_:1}),t(I),t(T,null,{default:e(()=>[t(h,{variant:"text",color:"primary",block:"",href:s.route("crm.activities.index")},{default:e(()=>[...a[18]||(a[18]=[r("Manage Tasks",-1)])]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}),t(c,{cols:"12",md:"8"},{default:e(()=>[t(f,{elevation:"2"},{default:e(()=>[t(x,{title:"Sales Pipeline Funnel"},{append:e(()=>[t(h,{icon:"",variant:"text",size:"small"},{default:e(()=>[t(d,null,{default:e(()=>[...a[19]||(a[19]=[r("mdi-dots-vertical",-1)])]),_:1})]),_:1})]),_:1}),t(B,null,{default:e(()=>[t(S,{type:"bar",height:"350",options:j.value,series:R.value},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),t(c,{cols:"12",md:"4"},{default:e(()=>[t(f,{elevation:"2",height:"100%"},{default:e(()=>[t(x,{title:"Activity Breakdown"}),t(B,{class:"d-flex flex-column align-center justify-center pt-8"},{default:e(()=>[t(S,{type:"donut",width:"100%",options:H.value,series:E.value},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),t(c,{cols:"12"},{default:e(()=>[t(f,{elevation:"2"},{default:e(()=>[t(x,{title:"Recent Activities"},{append:e(()=>[t(u(p),{href:s.route("crm.activities.index")},{default:e(()=>[t(h,{variant:"text",color:"primary"},{default:e(()=>[...a[20]||(a[20]=[r("View All",-1)])]),_:1})]),_:1},8,["href"])]),_:1}),t(I),t(w,{lines:"two"},{default:e(()=>[(m(!0),y(C,null,D(n.recentActivities,l=>(m(),_(v,{key:l.id,"prepend-icon":null},{prepend:e(()=>[t(g,{color:U(l.type),size:"40",class:"mr-4"},{default:e(()=>[t(ee,{name:F(l.type),style:{width:"20px",height:"20px",color:"white"}},null,8,["name"])]),_:2},1032,["color"])]),append:e(()=>[i("div",xe,[i("div",_e,[i("div",be,o(N(l.created_at)),1),t(P,{size:"x-small",color:l.status==="completed"?"success":"warning",variant:"flat",class:"mt-1"},{default:e(()=>[r(o(l.status),1)]),_:2},1032,["color"])]),t(K,null,{activator:e(({props:V})=>[t(h,Q({color:"primary",icon:"",flat:"",size:"small"},{ref_for:!0},V),{default:e(()=>[t(d,null,{default:e(()=>[...a[21]||(a[21]=[r("mdi-pencil",-1)])]),_:1})]),_:1},16)]),default:e(()=>[t(w,null,{default:e(()=>[l.status==="pending"?(m(),_(v,{key:0,onClick:V=>u(L).put(s.route("crm.activities.update",l.id),{...l,status:"completed"})},{prepend:e(()=>[t(d,{size:"small"},{default:e(()=>[...a[22]||(a[22]=[r("mdi-check",-1)])]),_:1})]),default:e(()=>[t(z,null,{default:e(()=>[...a[23]||(a[23]=[r("Mark Completed",-1)])]),_:1})]),_:1},8,["onClick"])):O("",!0),t(v,{onClick:V=>u(L).delete(s.route("crm.activities.destroy",l.id))},{prepend:e(()=>[t(d,{size:"small"},{default:e(()=>[...a[24]||(a[24]=[r("mdi-delete",-1)])]),_:1})]),default:e(()=>[t(z,null,{default:e(()=>[...a[25]||(a[25]=[r("Delete Activity",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])]),default:e(()=>[t(z,{class:"font-weight-bold"},{default:e(()=>[r(o(l.subject),1)]),_:2},1024),t(J,null,{default:e(()=>[r(o(l.description),1)]),_:2},1024)]),_:2},1024))),128)),n.recentActivities.length===0?(m(),_(v,{key:0,class:"text-center py-8"},{default:e(()=>[...a[26]||(a[26]=[i("div",{class:"text-medium-emphasis"},"No recent activities found",-1)])]),_:1})):O("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}},Le=ae(ye,[["__scopeId","data-v-d63e67f7"]]);export{Le as default};
