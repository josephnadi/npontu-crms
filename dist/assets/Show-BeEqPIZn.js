import{o as u,M as m,b as e,u as v,T as tt,a as l,k as et,m as W,h as a,N as $,i as d,U as f,f as n,R as o,v as V,c as z,O as x,n as g,ae as N,p as c,a2 as q,af as lt,ag as P,ah as at,ai as S,a4 as G,S as h,W as H,aj as J,q as Q,s as U,a8 as b,Z as j,a7 as Y,Y as nt,aa as L,ab as D,ac as O,ad as R,Q as it,r as p}from"./app-CqcLQhWc.js";import{_ as st}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-SEMuvBU0.js";import{A as ot,_ as dt,a as ut}from"./EngagementForm-CftqFFTl.js";import{_ as rt}from"./ActivityForm-C_6vI7lP.js";import"./LoaderWrapper-CNYIpUw8.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-BnGuLdGC.js";import"./useApi-o-nPpLEi-7nyp_4n4.js";const mt={class:"d-flex align-center"},ft={class:"text-h3 font-weight-bold"},vt={class:"d-flex align-center text-subtitle-1 text-medium-emphasis"},gt={class:"d-flex gap-2"},ct={class:"mb-4"},pt=["href"],xt={key:1,class:"text-body-2"},bt={class:"mb-4"},wt={class:"text-body-2"},yt={class:"mb-4"},Ct={class:"text-body-2"},kt={key:0},Vt={key:1},Tt={key:2},At={key:3},$t={class:"mb-4"},zt={class:"d-flex align-center"},Nt={class:"text-caption text-white"},Lt={class:"text-body-2"},Dt={class:"text-body-2",style:{"white-space":"pre-wrap"}},Et={class:"d-flex align-center py-2"},Pt={class:"text-caption font-weight-bold"},St={class:"text-right"},Ut={key:0},jt={class:"text-right"},It={class:"d-flex gap-2"},Mt={class:"text-center mb-6"},Bt={class:"text-body-1 text-medium-emphasis"},Ft={class:"text-center mb-6"},Wt={class:"text-body-1 text-medium-emphasis"},Qt={__name:"Show",props:{client:Object},setup(s){const I=s,E=p("contacts"),T=p(!1),y=p(!1),A=p(!1),C=p(!1),k=p(!1),M=p(!1),B=p(!1),F=p(!1),Z=()=>{A.value=!0},K=()=>{M.value=!0,b.post(route("crm.clients.convert",I.client.id),{},{onFinish:()=>{M.value=!1,A.value=!1}})},X=()=>{B.value=!0,b.post(route("crm.clients.convert-to-partner",I.client.id),{},{onFinish:()=>{B.value=!1,C.value=!1}})},_=()=>{F.value=!0,b.post(route("crm.clients.convert-to-ticket",I.client.id),{},{onFinish:()=>{F.value=!1,k.value=!1}})};return(r,t)=>(u(),m(h,null,[e(v(tt),{title:"Client Details - "+s.client.name},null,8,["title"]),e(st,null,{default:l(()=>[e(et,null,{default:l(()=>[e(W,{cols:"12",class:"d-flex justify-space-between align-center mb-4"},{default:l(()=>[a("div",mt,[e(v($),{href:r.route("crm.clients.index"),class:"mr-4"},{default:l(()=>[e(d,{icon:"",variant:"text"},{default:l(()=>[e(f,null,{default:l(()=>[...t[22]||(t[22]=[n("mdi-arrow-left",-1)])]),_:1})]),_:1})]),_:1},8,["href"]),a("div",null,[a("h2",ft,o(s.client.name),1),a("div",vt,[e(f,{size:"small",class:"mr-1"},{default:l(()=>[...t[23]||(t[23]=[n("mdi-factory",-1)])]),_:1}),n(" "+o(s.client.industry||"No Industry")+" ",1),e(V,{vertical:"",class:"mx-3"}),e(f,{size:"small",class:"mr-1"},{default:l(()=>[...t[24]||(t[24]=[n("mdi-map-marker",-1)])]),_:1}),n(" "+o(s.client.city||"No Location"),1)])])]),a("div",gt,[s.client.owner_id===r.$page.props.auth.user.id?(u(),z(d,{key:0,variant:"outlined",color:"warning",onClick:Z,title:"Convert to Lead"},{default:l(()=>[e(f,null,{default:l(()=>[...t[25]||(t[25]=[n("mdi-account-convert-outline",-1)])]),_:1})]),_:1})):x("",!0),s.client.owner_id===r.$page.props.auth.user.id?(u(),z(d,{key:1,variant:"outlined",color:"secondary",onClick:t[0]||(t[0]=i=>C.value=!0),title:"Convert to Partner"},{default:l(()=>[e(f,null,{default:l(()=>[...t[26]||(t[26]=[n("mdi-handshake-outline",-1)])]),_:1})]),_:1})):x("",!0),s.client.owner_id===r.$page.props.auth.user.id?(u(),z(d,{key:2,variant:"outlined",color:"info",onClick:t[1]||(t[1]=i=>k.value=!0),title:"Convert to Ticket"},{default:l(()=>[e(f,null,{default:l(()=>[...t[27]||(t[27]=[n("mdi-ticket-outline",-1)])]),_:1})]),_:1})):x("",!0),e(v($),{href:r.route("crm.clients.edit",s.client.id)},{default:l(()=>[e(d,{variant:"outlined",color:"primary",title:"Edit Client"},{default:l(()=>[e(f,null,{default:l(()=>[...t[28]||(t[28]=[n("mdi-pencil",-1)])]),_:1})]),_:1})]),_:1},8,["href"]),e(d,{color:"info",onClick:t[2]||(t[2]=i=>y.value=!0),title:"Log Engagement"},{default:l(()=>[e(f,null,{default:l(()=>[...t[29]||(t[29]=[n("mdi-calendar-plus",-1)])]),_:1})]),_:1})])]),_:1}),e(W,{cols:"12",md:"4"},{default:l(()=>[e(g,{elevation:"0",border:"",class:"mb-6"},{default:l(()=>[e(N,{title:"Client Information"}),e(V),e(c,{class:"pa-4"},{default:l(()=>[a("div",ct,[t[31]||(t[31]=a("div",{class:"text-caption text-medium-emphasis mb-1"},"Website",-1)),s.client.website?(u(),m("a",{key:0,href:s.client.website,target:"_blank",class:"text-body-2 text-primary text-decoration-none d-flex align-center"},[n(o(s.client.website)+" ",1),e(f,{size:"x-small",class:"ml-1"},{default:l(()=>[...t[30]||(t[30]=[n("mdi-open-in-new",-1)])]),_:1})],8,pt)):(u(),m("span",xt,"N/A"))]),a("div",bt,[t[32]||(t[32]=a("div",{class:"text-caption text-medium-emphasis mb-1"},"Phone",-1)),a("div",wt,o(s.client.phone||"N/A"),1)]),a("div",yt,[t[33]||(t[33]=a("div",{class:"text-caption text-medium-emphasis mb-1"},"Full Address",-1)),a("div",Ct,[n(o(s.client.address),1),s.client.address?(u(),m("br",kt)):x("",!0),n(" "+o(s.client.city),1),s.client.state?(u(),m("span",Vt,", "+o(s.client.state),1)):x("",!0),n(" "+o(s.client.postal_code),1),s.client.city?(u(),m("br",Tt)):x("",!0),n(" "+o(s.client.country)+" ",1),!s.client.address&&!s.client.city?(u(),m("span",At,"N/A")):x("",!0)])]),a("div",$t,[t[34]||(t[34]=a("div",{class:"text-caption text-medium-emphasis mb-1"},"Owner",-1)),a("div",zt,[e(q,{size:"24",color:"primary",class:"mr-2"},{default:l(()=>[a("span",Nt,o(s.client.owner?.name.charAt(0)),1)]),_:1}),a("span",Lt,o(s.client.owner?.name),1)])])]),_:1})]),_:1}),e(g,{elevation:"0",border:""},{default:l(()=>[e(N,{title:"Notes"}),e(V),e(c,{class:"pa-4"},{default:l(()=>[a("p",Dt,o(s.client.notes||"No notes available for this client."),1)]),_:1})]),_:1})]),_:1}),e(W,{cols:"12",md:"8"},{default:l(()=>[e(lt,{modelValue:E.value,"onUpdate:modelValue":t[3]||(t[3]=i=>E.value=i),color:"primary"},{default:l(()=>[e(P,{value:"contacts"},{default:l(()=>[n("Contacts ("+o(s.client.contacts?.length||0)+")",1)]),_:1}),e(P,{value:"deals"},{default:l(()=>[n("Deals ("+o(s.client.deals?.length||0)+")",1)]),_:1}),e(P,{value:"activities"},{default:l(()=>[...t[35]||(t[35]=[n("Activities",-1)])]),_:1}),e(P,{value:"engagements"},{default:l(()=>[...t[36]||(t[36]=[n("Engagements",-1)])]),_:1})]),_:1},8,["modelValue"]),e(at,{modelValue:E.value,"onUpdate:modelValue":t[7]||(t[7]=i=>E.value=i),class:"mt-4"},{default:l(()=>[e(S,{value:"contacts"},{default:l(()=>[e(g,{elevation:"0",border:""},{default:l(()=>[e(N,{title:"Associated Contacts"},{append:l(()=>[e(v($),{href:r.route("crm.contacts.create",{client_id:s.client.id})},{default:l(()=>[e(d,{color:"primary",size:"small",variant:"text","prepend-icon":"mdi-plus"},{default:l(()=>[...t[37]||(t[37]=[n("Add Contact",-1)])]),_:1})]),_:1},8,["href"])]),_:1}),e(V),e(G,null,{default:l(()=>[t[41]||(t[41]=a("thead",null,[a("tr",null,[a("th",{class:"text-left font-weight-bold"},"Name"),a("th",{class:"text-left font-weight-bold"},"Email"),a("th",{class:"text-left font-weight-bold"},"Job Title"),a("th",{class:"text-right font-weight-bold"},"Actions")])],-1)),a("tbody",null,[(u(!0),m(h,null,H(s.client.contacts,i=>(u(),m("tr",{key:i.id},[a("td",null,[a("div",Et,[e(q,{color:"grey-lighten-3",size:"32",class:"mr-3"},{default:l(()=>[a("span",Pt,o(i.first_name.charAt(0))+o(i.last_name.charAt(0)),1)]),_:2},1024),e(v($),{href:r.route("crm.contacts.show",i.id),class:"text-decoration-none font-weight-bold text-primary"},{default:l(()=>[n(o(i.first_name)+" "+o(i.last_name),1)]),_:2},1032,["href"])])]),a("td",null,o(i.email||"N/A"),1),a("td",null,o(i.job_title||"N/A"),1),a("td",St,[e(J,null,{activator:l(({props:w})=>[e(d,Y({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},w),null,16)]),default:l(()=>[e(Q,{size:"small"},{default:l(()=>[e(U,{onClick:w=>v(b).get(r.route("crm.contacts.show",i.id)),"prepend-icon":"mdi-eye"},{default:l(()=>[e(j,null,{default:l(()=>[...t[38]||(t[38]=[n("View Details",-1)])]),_:1})]),_:1},8,["onClick"]),e(U,{onClick:w=>v(b).get(r.route("crm.contacts.edit",i.id)),"prepend-icon":"mdi-pencil"},{default:l(()=>[e(j,null,{default:l(()=>[...t[39]||(t[39]=[n("Edit",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128)),s.client.contacts.length===0?(u(),m("tr",Ut,[...t[40]||(t[40]=[a("td",{colspan:"4",class:"text-center py-8 text-medium-emphasis"}," No contacts found for this client. ",-1)])])):x("",!0)])]),_:1})]),_:1})]),_:1}),e(S,{value:"deals"},{default:l(()=>[e(g,{elevation:"0",border:""},{default:l(()=>[s.client.deals?.length>0?(u(),z(G,{key:0},{default:l(()=>[t[44]||(t[44]=a("thead",null,[a("tr",null,[a("th",{class:"text-left font-weight-bold"},"Title"),a("th",{class:"text-left font-weight-bold"},"Value"),a("th",{class:"text-left font-weight-bold"},"Stage"),a("th",{class:"text-right font-weight-bold"},"Action")])],-1)),a("tbody",null,[(u(!0),m(h,null,H(s.client.deals,i=>(u(),m("tr",{key:i.id},[a("td",null,o(i.title),1),a("td",null,"GHâ‚µ "+o(i.value.toLocaleString()),1),a("td",null,[e(nt,{size:"x-small",color:"primary",variant:"tonal"},{default:l(()=>[n(o(i.stage?.name||"Unknown"),1)]),_:2},1024)]),a("td",jt,[e(J,null,{activator:l(({props:w})=>[e(d,Y({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},w),null,16)]),default:l(()=>[e(Q,{size:"small"},{default:l(()=>[e(U,{onClick:w=>v(b).get(r.route("crm.deals.show",i.id)),"prepend-icon":"mdi-eye"},{default:l(()=>[e(j,null,{default:l(()=>[...t[42]||(t[42]=[n("View Details",-1)])]),_:1})]),_:1},8,["onClick"]),e(U,{onClick:w=>v(b).get(r.route("crm.deals.edit",i.id)),"prepend-icon":"mdi-pencil"},{default:l(()=>[e(j,null,{default:l(()=>[...t[43]||(t[43]=[n("Edit",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128))])]),_:1})):(u(),z(c,{key:1,class:"pa-8 text-center text-medium-emphasis"},{default:l(()=>[e(f,{size:"48",class:"mb-2"},{default:l(()=>[...t[45]||(t[45]=[n("mdi-handshake-outline",-1)])]),_:1}),t[47]||(t[47]=a("p",null,"No deals associated with this client.",-1)),e(v($),{href:r.route("crm.deals.create",{client_id:s.client.id})},{default:l(()=>[e(d,{variant:"text",color:"primary","prepend-icon":"mdi-plus"},{default:l(()=>[...t[46]||(t[46]=[n("Create Deal",-1)])]),_:1})]),_:1},8,["href"])]),_:1}))]),_:1})]),_:1}),e(S,{value:"activities"},{default:l(()=>[e(g,{elevation:"0",border:""},{default:l(()=>[e(N,{title:"Activity Timeline"},{append:l(()=>[e(d,{color:"primary",size:"small",variant:"flat","prepend-icon":"mdi-plus",onClick:t[4]||(t[4]=i=>T.value=!0)},{default:l(()=>[...t[48]||(t[48]=[n(" Log Activity ",-1)])]),_:1})]),_:1}),e(V),e(c,{class:"pa-4"},{default:l(()=>[e(ot,{activities:s.client.activities},null,8,["activities"])]),_:1})]),_:1})]),_:1}),e(S,{value:"engagements"},{default:l(()=>[e(g,{elevation:"0",border:""},{default:l(()=>[e(N,{title:"Engagement Timeline"},{append:l(()=>[a("div",It,[e(d,{color:"warning",size:"small",variant:"flat","prepend-icon":"mdi-star-plus-outline",onClick:t[5]||(t[5]=i=>y.value=!0)},{default:l(()=>[...t[49]||(t[49]=[n(" Log Engagement ",-1)])]),_:1}),e(d,{color:"secondary",size:"small",variant:"text","prepend-icon":"mdi-star-outline",onClick:t[6]||(t[6]=i=>v(b).get(r.route("crm.engagements.index")))},{default:l(()=>[...t[50]||(t[50]=[n(" View All ",-1)])]),_:1})])]),_:1}),e(V),e(c,{class:"pa-4"},{default:l(()=>[e(dt,{engagements:s.client.engagements},null,8,["engagements"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(L,{modelValue:T.value,"onUpdate:modelValue":t[10]||(t[10]=i=>T.value=i),"max-width":"600px"},{default:l(()=>[e(g,null,{default:l(()=>[e(D,{class:"pa-4 bg-primary text-white d-flex justify-space-between align-center"},{default:l(()=>[t[51]||(t[51]=a("span",null,"Log New Activity",-1)),e(d,{icon:"mdi-close",variant:"text",size:"small",onClick:t[8]||(t[8]=i=>T.value=!1)})]),_:1}),e(c,{class:"pa-4 pt-6"},{default:l(()=>[e(rt,{"activityable-type":"App\\Models\\Client","activityable-id":s.client.id,onSuccess:t[9]||(t[9]=i=>T.value=!1)},null,8,["activityable-id"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:y.value,"onUpdate:modelValue":t[13]||(t[13]=i=>y.value=i),"max-width":"700px"},{default:l(()=>[e(g,null,{default:l(()=>[e(D,{class:"pa-4 bg-warning text-white d-flex justify-space-between align-center"},{default:l(()=>[a("span",null,"Log Engagement for "+o(s.client.name),1),e(d,{icon:"mdi-close",variant:"text",size:"small",onClick:t[11]||(t[11]=i=>y.value=!1)})]),_:1}),e(c,{class:"pa-4 pt-6"},{default:l(()=>[e(ut,{"engageable-type":"App\\Models\\Client","engageable-id":s.client.id,onSuccess:t[12]||(t[12]=i=>y.value=!1)},null,8,["engageable-id"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:A.value,"onUpdate:modelValue":t[15]||(t[15]=i=>A.value=i),"max-width":"500px"},{default:l(()=>[e(g,null,{default:l(()=>[e(D,{class:"pa-4 bg-warning text-white"},{default:l(()=>[...t[52]||(t[52]=[n(" Convert Client to Lead? ",-1)])]),_:1}),e(c,{class:"pa-4 pt-6"},{default:l(()=>[...t[53]||(t[53]=[n(" This will archive the client and its contacts, and create a new lead from the primary contact information. Activities and engagements will be migrated to the new lead. ",-1)])]),_:1}),e(O,{class:"pa-4"},{default:l(()=>[e(R),e(d,{variant:"text",onClick:t[14]||(t[14]=i=>A.value=!1)},{default:l(()=>[...t[54]||(t[54]=[n("Cancel",-1)])]),_:1}),e(d,{color:"warning",variant:"elevated",loading:M.value,onClick:K},{default:l(()=>[...t[55]||(t[55]=[n(" Confirm Conversion ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:C.value,"onUpdate:modelValue":t[18]||(t[18]=i=>C.value=i),"max-width":"500px"},{default:l(()=>[e(g,null,{default:l(()=>[e(D,{class:"pa-4 bg-secondary text-white d-flex justify-space-between align-center"},{default:l(()=>[t[56]||(t[56]=a("span",null,"Convert to Partner",-1)),e(d,{icon:"mdi-close",variant:"text",size:"small",onClick:t[16]||(t[16]=i=>C.value=!1)})]),_:1}),e(c,{class:"pa-6"},{default:l(()=>[a("div",Mt,[e(f,{color:"secondary",size:"64",class:"mb-4"},{default:l(()=>[...t[57]||(t[57]=[n("mdi-handshake-outline",-1)])]),_:1}),t[60]||(t[60]=a("h3",{class:"text-h5 mb-2"},"Are you sure?",-1)),a("p",Bt,[t[58]||(t[58]=n(" This will convert ",-1)),a("strong",null,o(s.client.name),1),t[59]||(t[59]=n(" into a Partner. The client record will remain, but a new Partner profile will be created. ",-1))])]),e(it,{type:"info",variant:"tonal",class:"mb-6"},{default:l(()=>[...t[61]||(t[61]=[n(" The new Partner will use the client's information. ",-1)])]),_:1})]),_:1}),e(O,{class:"pa-4 pt-0"},{default:l(()=>[e(R),e(d,{variant:"text",onClick:t[17]||(t[17]=i=>C.value=!1)},{default:l(()=>[...t[62]||(t[62]=[n("Cancel",-1)])]),_:1}),e(d,{color:"secondary",loading:B.value,onClick:X},{default:l(()=>[...t[63]||(t[63]=[n(" Confirm Conversion ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:k.value,"onUpdate:modelValue":t[21]||(t[21]=i=>k.value=i),"max-width":"500px"},{default:l(()=>[e(g,null,{default:l(()=>[e(D,{class:"pa-4 bg-info text-white d-flex justify-space-between align-center"},{default:l(()=>[t[64]||(t[64]=a("span",null,"Convert to Ticket",-1)),e(d,{icon:"mdi-close",variant:"text",size:"small",onClick:t[19]||(t[19]=i=>k.value=!1)})]),_:1}),e(c,{class:"pa-6"},{default:l(()=>[a("div",Ft,[e(f,{color:"info",size:"64",class:"mb-4"},{default:l(()=>[...t[65]||(t[65]=[n("mdi-ticket-outline",-1)])]),_:1}),t[68]||(t[68]=a("h3",{class:"text-h5 mb-2"},"Create Support Ticket?",-1)),a("p",Wt,[t[66]||(t[66]=n(" This will create a support ticket for ",-1)),a("strong",null,o(s.client.name),1),t[67]||(t[67]=n(". ",-1))])])]),_:1}),e(O,{class:"pa-4 pt-0"},{default:l(()=>[e(R),e(d,{variant:"text",onClick:t[20]||(t[20]=i=>k.value=!1)},{default:l(()=>[...t[69]||(t[69]=[n("Cancel",-1)])]),_:1}),e(d,{color:"info",loading:F.value,onClick:_},{default:l(()=>[...t[70]||(t[70]=[n(" Confirm Ticket Creation ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64))}};export{Qt as default};
