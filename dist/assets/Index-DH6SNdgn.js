import{r as b,D as E,o as m,M as c,b as e,u as C,T as R,a as t,l as q,k as P,m as n,n as p,p as f,a2 as h,U as u,f as r,h as s,R as i,i as k,g as H,$ as N,v as D,a4 as W,as as Y,O as V,S as T,W as Z,N as G,Y as A,am as J,aj as K,q as Q,s as j,Z as S,a7 as X,c as ee,a9 as te,a8 as U}from"./app-CqcLQhWc.js";import{_ as le}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-SEMuvBU0.js";import{l as se}from"./lodash-CdjocJhF.js";import"./LoaderWrapper-CNYIpUw8.js";import"./LogoMain.vue_vue_type_script_setup_true_lang-BnGuLdGC.js";import"./useApi-o-nPpLEi-7nyp_4n4.js";const ae={class:"text-h4 font-weight-bold"},re={class:"text-h4 font-weight-bold"},oe={class:"text-h4 font-weight-bold"},ie={class:"text-h4 font-weight-bold"},de={key:0},ne={colspan:"6",class:"text-center py-10"},ue={key:1},me={colspan:"6",class:"text-center py-10"},ce={class:"py-4"},fe={class:"d-flex flex-column"},pe={class:"text-caption text-medium-emphasis text-truncate",style:{"max-width":"250px"}},ge={class:"d-flex flex-column"},ve={key:0,class:"text-subtitle-2"},xe={key:1,class:"text-caption text-medium-emphasis"},ye={class:"d-flex flex-column gap-1"},be={class:"d-flex align-center"},he={class:"ml-2 text-caption"},Ve={class:"font-weight-medium"},_e={class:"text-right"},Ue={__name:"Index",props:{projects:Object,filters:Object,stats:Object},setup(d){const _=d,g=b(_.filters.search||""),v=b(_.filters.status||""),x=b(_.filters.priority||""),w=b(!1),B=[{title:"All Statuses",value:""},{title:"Pending",value:"pending"},{title:"In Progress",value:"in_progress"},{title:"Completed",value:"completed"},{title:"Cancelled",value:"cancelled"}],I=[{title:"All Priorities",value:""},{title:"Low",value:"low"},{title:"Medium",value:"medium"},{title:"High",value:"high"},{title:"Urgent",value:"urgent"}],F=()=>{w.value=!0,U.get(route("crm.projects.index"),{search:g.value,status:v.value,priority:x.value},{preserveState:!0,replace:!0,onFinish:()=>w.value=!1})},L=()=>{g.value="",v.value="",x.value="",F()},z=o=>{confirm("Are you sure you want to delete this project?")&&U.delete(route("crm.projects.destroy",o))},O=o=>{switch(o){case"pending":return"warning";case"in_progress":return"info";case"completed":return"success";case"cancelled":return"error";default:return"grey"}},M=o=>{switch(o){case"low":return"grey";case"medium":return"info";case"high":return"warning";case"urgent":return"error";default:return"grey"}},$=o=>o?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o):"$0.00";return E([g,v,x],se.debounce(()=>{F()},500)),(o,l)=>(m(),c(T,null,[e(C(R),{title:"Projects"}),e(le,null,{default:t(()=>[e(q,{fluid:""},{default:t(()=>[e(P,{class:"mb-4"},{default:t(()=>[e(n,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(p,{border:"",elevation:"0",class:"bg-light-primary"},{default:t(()=>[e(f,{class:"d-flex align-center"},{default:t(()=>[e(h,{color:"primary",variant:"tonal",class:"mr-4"},{default:t(()=>[e(u,null,{default:t(()=>[...l[5]||(l[5]=[r("mdi-folder-outline",-1)])]),_:1})]),_:1}),s("div",null,[l[6]||(l[6]=s("div",{class:"text-subtitle-2 text-grey"},"Total Projects",-1)),s("div",ae,i(d.stats.total),1)])]),_:1})]),_:1})]),_:1}),e(n,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(p,{border:"",elevation:"0",class:"bg-light-info"},{default:t(()=>[e(f,{class:"d-flex align-center"},{default:t(()=>[e(h,{color:"info",variant:"tonal",class:"mr-4"},{default:t(()=>[e(u,null,{default:t(()=>[...l[7]||(l[7]=[r("mdi-progress-check",-1)])]),_:1})]),_:1}),s("div",null,[l[8]||(l[8]=s("div",{class:"text-subtitle-2 text-grey"},"Active",-1)),s("div",re,i(d.stats.active),1)])]),_:1})]),_:1})]),_:1}),e(n,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(p,{border:"",elevation:"0",class:"bg-light-error"},{default:t(()=>[e(f,{class:"d-flex align-center"},{default:t(()=>[e(h,{color:"error",variant:"tonal",class:"mr-4"},{default:t(()=>[e(u,null,{default:t(()=>[...l[9]||(l[9]=[r("mdi-alert-circle-outline",-1)])]),_:1})]),_:1}),s("div",null,[l[10]||(l[10]=s("div",{class:"text-subtitle-2 text-grey"},"Overdue",-1)),s("div",oe,i(d.stats.overdue),1)])]),_:1})]),_:1})]),_:1}),e(n,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(p,{border:"",elevation:"0",class:"bg-light-success"},{default:t(()=>[e(f,{class:"d-flex align-center"},{default:t(()=>[e(h,{color:"success",variant:"tonal",class:"mr-4"},{default:t(()=>[e(u,null,{default:t(()=>[...l[11]||(l[11]=[r("mdi-check-all",-1)])]),_:1})]),_:1}),s("div",null,[l[12]||(l[12]=s("div",{class:"text-subtitle-2 text-grey"},"Completed",-1)),s("div",ie,i(d.stats.completed),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(p,{elevation:"0",class:"mb-6"},{default:t(()=>[e(f,{class:"d-flex align-center justify-space-between py-4"},{default:t(()=>[l[14]||(l[14]=s("div",null,[s("h1",{class:"text-h4 mb-1"},"Projects"),s("p",{class:"text-subtitle-1 text-medium-emphasis"},"Manage your projects and their progress.")],-1)),e(k,{color:"primary","prepend-icon":"mdi-plus",to:o.route("crm.projects.create")},{default:t(()=>[...l[13]||(l[13]=[r(" New Project ",-1)])]),_:1},8,["to"])]),_:1})]),_:1}),e(p,{elevation:"0"},{default:t(()=>[e(f,{class:"pa-4"},{default:t(()=>[e(P,null,{default:t(()=>[e(n,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(H,{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=a=>g.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search projects...",variant:"outlined",density:"comfortable","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",sm:"6",md:"2"},{default:t(()=>[e(N,{modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=a=>v.value=a),items:B,label:"Status",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",sm:"6",md:"2"},{default:t(()=>[e(N,{modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=a=>x.value=a),items:I,label:"Priority",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"4",class:"d-flex align-center"},{default:t(()=>[e(k,{variant:"text",color:"primary",onClick:L,class:"ml-2"},{default:t(()=>[...l[15]||(l[15]=[r(" Clear Filters ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(D),e(W,{hover:""},{default:t(()=>[l[25]||(l[25]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Project Name"),s("th",{class:"text-left"},"Client / Deal"),s("th",{class:"text-left"},"Status & Priority"),s("th",{class:"text-left",style:{width:"150px"}},"Progress"),s("th",{class:"text-left"},"Budget"),s("th",{class:"text-right"},"Actions")])],-1)),s("tbody",null,[w.value?(m(),c("tr",de,[s("td",ne,[e(Y,{indeterminate:"",color:"primary"})])])):d.projects.data.length===0?(m(),c("tr",ue,[s("td",me,[e(u,{size:"64",color:"medium-emphasis",class:"mb-4"},{default:t(()=>[...l[16]||(l[16]=[r("mdi-folder-open-outline",-1)])]),_:1}),l[17]||(l[17]=s("p",{class:"text-h6 text-medium-emphasis"},"No projects found.",-1))])])):V("",!0),(m(!0),c(T,null,Z(d.projects.data,a=>(m(),c("tr",{key:a.id},[s("td",ce,[s("div",fe,[e(C(G),{href:o.route("crm.projects.show",a.id),class:"text-subtitle-1 font-weight-bold text-decoration-none text-primary"},{default:t(()=>[r(i(a.name),1)]),_:2},1032,["href"]),s("span",pe,i(a.description),1)])]),s("td",null,[s("div",ge,[a.client?(m(),c("span",ve,i(a.client.name),1)):V("",!0),a.deal?(m(),c("span",xe,[e(u,{size:"x-small"},{default:t(()=>[...l[18]||(l[18]=[r("mdi-handshake-outline",-1)])]),_:1}),r(" "+i(a.deal.title),1)])):V("",!0)])]),s("td",null,[s("div",ye,[e(A,{color:O(a.status),size:"x-small",label:"",class:"text-uppercase font-weight-bold"},{default:t(()=>[r(i(a.status.replace("_"," ")),1)]),_:2},1032,["color"]),e(A,{color:M(a.priority),size:"x-small",variant:"outlined",class:"text-uppercase font-weight-bold"},{default:t(()=>[r(i(a.priority),1)]),_:2},1032,["color"])])]),s("td",null,[s("div",be,[e(J,{modelValue:a.progress,"onUpdate:modelValue":y=>a.progress=y,color:"primary",height:"8",rounded:""},null,8,["modelValue","onUpdate:modelValue"]),s("span",he,i(a.progress)+"%",1)])]),s("td",Ve,i($(a.budget)),1),s("td",_e,[e(K,null,{activator:t(({props:y})=>[e(k,X({icon:"mdi-pencil",size:"small"},{ref_for:!0},y),null,16)]),default:t(()=>[e(Q,null,{default:t(()=>[e(j,{to:o.route("crm.projects.show",a.id)},{prepend:t(()=>[e(u,null,{default:t(()=>[...l[19]||(l[19]=[r("mdi-eye",-1)])]),_:1})]),default:t(()=>[e(S,null,{default:t(()=>[...l[20]||(l[20]=[r("View Details",-1)])]),_:1})]),_:1},8,["to"]),e(j,{to:o.route("crm.projects.edit",a.id)},{prepend:t(()=>[e(u,null,{default:t(()=>[...l[21]||(l[21]=[r("mdi-pencil",-1)])]),_:1})]),default:t(()=>[e(S,null,{default:t(()=>[...l[22]||(l[22]=[r("Edit Project",-1)])]),_:1})]),_:1},8,["to"]),e(j,{onClick:y=>z(a.id)},{prepend:t(()=>[e(u,null,{default:t(()=>[...l[23]||(l[23]=[r("mdi-delete",-1)])]),_:1})]),default:t(()=>[e(S,null,{default:t(()=>[...l[24]||(l[24]=[r("Delete Project",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128))])]),_:1}),e(D),d.projects.links.length>3?(m(),ee(f,{key:0,class:"pa-4 d-flex justify-center"},{default:t(()=>[e(te,{modelValue:d.projects.current_page,"onUpdate:modelValue":[l[3]||(l[3]=a=>d.projects.current_page=a),l[4]||(l[4]=a=>C(U).get(o.route("crm.projects.index",{page:a})))],length:d.projects.last_page,"total-visible":"7",rounded:"circle"},null,8,["modelValue","length"])]),_:1})):V("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{Ue as default};
