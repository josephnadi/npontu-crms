import{o,c as f,a as e,b as t,p as A,M as g,U as D,h as i,O as v,ao as I,S as h,W as k,an as q,R as c,aj as L,q as U,s as S,Z as C,f as p,i as z,a7 as E,Y as V,_ as N,n as M,a8 as T,L as B,m as b,$,u,g as j,a1 as F,k as O,w as P}from"./app-CqcLQhWc.js";import{_ as R}from"./LoaderWrapper-CNYIpUw8.js";const W={key:0,class:"text-center py-8"},H={class:"d-flex justify-space-between align-start mb-1"},Y={class:"text-subtitle-1 font-weight-bold"},Z={class:"text-caption text-grey"},G={class:"text-body-2 mb-2"},J={class:"d-flex align-center gap-2"},K={__name:"ActivityTimeline",props:{activities:{type:Array,required:!0}},setup(y){const x=n=>{confirm("Are you sure you want to delete this activity?")&&T.delete(window.route("crm.activities.destroy",n),{preserveScroll:!0})},_=n=>{T.put(window.route("crm.activities.update",n.id),{...n,status:"completed"},{preserveScroll:!0})},w=n=>{switch(n){case"call":return"custom-phone";case"meeting":return"custom-users";case"email":return"custom-mail";case"task":return"custom-check";case"note":return"custom-file-text";default:return"custom-calendar"}},r=n=>{switch(n){case"call":return"info";case"meeting":return"primary";case"email":return"warning";case"task":return"success";case"note":return"secondary";default:return"grey"}},d=n=>new Date(n).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return(n,s)=>(o(),f(M,{variant:"flat"},{default:e(()=>[t(A,null,{default:e(()=>[y.activities.length===0?(o(),g("div",W,[t(D,{icon:"mdi-calendar-blank",size:"48",color:"grey-lighten-1",class:"mb-2"}),s[0]||(s[0]=i("p",{class:"text-grey"},"No activities recorded yet.",-1))])):v("",!0),t(I,{side:"end",align:"start",density:"compact"},{default:e(()=>[(o(!0),g(h,null,k(y.activities,l=>(o(),f(q,{key:l.id,"dot-color":r(l.type),size:"small"},{icon:e(()=>[t(N,{name:w(l.type),style:{width:"16px",height:"16px",color:"white"}},null,8,["name"])]),default:e(()=>[i("div",H,[i("div",null,[i("h4",Y,c(l.subject),1),i("span",Z,c(d(l.activity_date)),1)]),t(L,null,{activator:e(({props:a})=>[t(z,E({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},a),null,16)]),default:e(()=>[t(U,{size:"small"},{default:e(()=>[l.status==="pending"?(o(),f(S,{key:0,onClick:a=>_(l),"prepend-icon":"mdi-check",color:"success"},{default:e(()=>[t(C,null,{default:e(()=>[...s[1]||(s[1]=[p("Mark Completed",-1)])]),_:1})]),_:1},8,["onClick"])):v("",!0),t(S,{onClick:a=>x(l.id),"prepend-icon":"mdi-delete",color:"error"},{default:e(()=>[t(C,null,{default:e(()=>[...s[2]||(s[2]=[p("Delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),i("p",G,c(l.description),1),i("div",J,[t(V,{size:"x-small",color:r(l.type),variant:"tonal",class:"text-capitalize"},{default:e(()=>[p(c(l.type),1)]),_:2},1032,["color"]),l.status==="completed"?(o(),f(V,{key:0,size:"x-small",color:"success",variant:"flat"},{default:e(()=>[...s[3]||(s[3]=[p(" Completed ",-1)])]),_:1})):l.status==="pending"?(o(),f(V,{key:1,size:"x-small",color:"warning",variant:"tonal"},{default:e(()=>[...s[4]||(s[4]=[p(" Pending ",-1)])]),_:1})):v("",!0)])]),_:2},1032,["dot-color"]))),128))]),_:1})]),_:1})]),_:1}))}},oe=R(K,[["__scopeId","data-v-446cf719"]]),Q={key:0,class:"text-center py-8"},X={class:"d-flex justify-space-between align-start mb-1"},ee={class:"d-flex align-center"},te={class:"text-subtitle-1 font-weight-bold mr-2"},se={class:"text-caption text-grey"},re={key:0,class:"text-body-2 text-medium-emphasis mb-2"},le={key:1,class:"d-flex flex-wrap",style:{gap:"4px"}},ie={__name:"EngagementTimeline",props:{engagements:{type:Array,required:!0}},setup(y){const x=d=>{confirm("Are you sure you want to delete this engagement?")&&T.delete(route("crm.engagements.destroy",d),{preserveScroll:!0})},_=d=>{switch(d){case"email":return"custom-mail";case"call":return"custom-phone";case"meeting":return"custom-users";case"webinar":return"custom-video";case"form_submitted":return"custom-file-text";case"content_viewed":return"custom-eye";default:return"custom-calendar"}},w=d=>{switch(d){case"email":return"warning";case"call":return"info";case"meeting":return"primary";case"webinar":return"secondary";case"form_submitted":return"success";case"content_viewed":return"info";default:return"grey"}},r=d=>new Date(d).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return(d,n)=>(o(),f(M,{variant:"flat"},{default:e(()=>[t(A,null,{default:e(()=>[y.engagements.length===0?(o(),g("div",Q,[t(D,{icon:"mdi-history",size:"48",color:"grey-lighten-1",class:"mb-2"}),n[0]||(n[0]=i("p",{class:"text-grey"},"No engagements recorded yet.",-1))])):v("",!0),t(I,{side:"end",align:"start",density:"compact"},{default:e(()=>[(o(!0),g(h,null,k(y.engagements,s=>(o(),f(q,{key:s.id,"dot-color":w(s.type),size:"small"},{icon:e(()=>[t(N,{name:_(s.type),style:{width:"16px",height:"16px",color:"white"}},null,8,["name"])]),default:e(()=>[i("div",X,[i("div",null,[i("div",ee,[i("h4",te,c(s.subject),1),t(V,{size:"x-small",color:s.score>=50?"success":"grey",variant:"tonal"},{default:e(()=>[p(" Score: "+c(s.score),1)]),_:2},1032,["color"])]),i("span",se,c(r(s.engagement_date)),1)]),t(L,null,{activator:e(({props:l})=>[t(z,E({icon:"mdi-dots-vertical",variant:"text",size:"small"},{ref_for:!0},l),null,16)]),default:e(()=>[t(U,{size:"small"},{default:e(()=>[t(S,{onClick:l=>x(s.id),"prepend-icon":"mdi-delete",color:"error"},{default:e(()=>[t(C,null,{default:e(()=>[...n[1]||(n[1]=[p("Delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),s.description?(o(),g("p",re,c(s.description),1)):v("",!0),s.metadata?(o(),g("div",le,[(o(!0),g(h,null,k(s.metadata,(l,a)=>(o(),f(V,{key:a,size:"x-small",variant:"outlined"},{default:e(()=>[p(c(a)+": "+c(l),1)]),_:2},1024))),128))])):v("",!0)]),_:2},1032,["dot-color"]))),128))]),_:1})]),_:1})]),_:1}))}},de={__name:"EngagementForm",props:{engageableType:{type:String,required:!0},engageableId:{type:[Number,String],required:!0}},emits:["success"],setup(y,{emit:x}){const _=y,w=x,r=B({type:"email",subject:"",description:"",engagement_date:new Date().toISOString().slice(0,16),score:10,engageable_type:_.engageableType,engageable_id:_.engageableId,metadata:{}}),d=[{title:"Email Open",value:"email"},{title:"Phone Call",value:"call"},{title:"Meeting",value:"meeting"},{title:"Webinar Attended",value:"webinar"},{title:"Form Submitted",value:"form_submitted"},{title:"Content Viewed",value:"content_viewed"},{title:"Other",value:"other"}],n=[{title:"Low (1-10)",value:10},{title:"Medium (11-49)",value:30},{title:"High (50-100)",value:75}],s=()=>{r.post(window.route("crm.engagements.store"),{onSuccess:()=>{r.reset("subject","description"),w("success")}})};return(l,a)=>(o(),g("form",{onSubmit:P(s,["prevent"])},[t(O,null,{default:e(()=>[t(b,{cols:"12",md:"6"},{default:e(()=>[t($,{modelValue:u(r).type,"onUpdate:modelValue":a[0]||(a[0]=m=>u(r).type=m),items:d,label:"Engagement Type",required:"",density:"comfortable",variant:"outlined","prepend-inner-icon":"mdi-star-circle-outline"},null,8,["modelValue"])]),_:1}),t(b,{cols:"12",md:"6"},{default:e(()=>[t($,{modelValue:u(r).score,"onUpdate:modelValue":a[1]||(a[1]=m=>u(r).score=m),items:n,label:"Priority / Score",required:"",density:"comfortable",variant:"outlined","prepend-inner-icon":"mdi-trending-up"},null,8,["modelValue"])]),_:1}),t(b,{cols:"12"},{default:e(()=>[t(j,{modelValue:u(r).engagement_date,"onUpdate:modelValue":a[2]||(a[2]=m=>u(r).engagement_date=m),label:"Date & Time",type:"datetime-local",required:"",density:"comfortable",variant:"outlined","prepend-inner-icon":"mdi-calendar-clock"},null,8,["modelValue"])]),_:1}),t(b,{cols:"12"},{default:e(()=>[t(j,{modelValue:u(r).subject,"onUpdate:modelValue":a[3]||(a[3]=m=>u(r).subject=m),label:"Subject / Topic",required:"",density:"comfortable","error-messages":u(r).errors.subject,variant:"outlined","prepend-inner-icon":"mdi-text-short"},null,8,["modelValue","error-messages"])]),_:1}),t(b,{cols:"12"},{default:e(()=>[t(F,{modelValue:u(r).description,"onUpdate:modelValue":a[4]||(a[4]=m=>u(r).description=m),label:"Details",rows:"3",density:"comfortable",variant:"outlined","prepend-inner-icon":"mdi-note-text-outline"},null,8,["modelValue"])]),_:1}),t(b,{cols:"12",class:"d-flex justify-end"},{default:e(()=>[t(z,{type:"submit",color:"warning",loading:u(r).processing,"prepend-icon":"mdi-check"},{default:e(()=>[...a[5]||(a[5]=[p(" Log Engagement ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})],32))}};export{oe as A,ie as _,de as a};
